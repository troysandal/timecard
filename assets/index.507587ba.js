var et=Object.defineProperty;var tt=(e,t,n)=>t in e?et(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Y=(e,t,n)=>(tt(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))i(u);new MutationObserver(u=>{for(const l of u)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(u){const l={};return u.integrity&&(l.integrity=u.integrity),u.referrerpolicy&&(l.referrerPolicy=u.referrerpolicy),u.crossorigin==="use-credentials"?l.credentials="include":u.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(u){if(u.ep)return;u.ep=!0;const l=n(u);fetch(u.href,l)}})();function re(){}function le(e,t){for(const n in t)e[n]=t[n];return e}function Qe(e){return e()}function Le(){return Object.create(null)}function $(e){e.forEach(Qe)}function De(e){return typeof e=="function"}function ee(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let ge;function Oe(e,t){return ge||(ge=document.createElement("a")),ge.href=t,e===ge.href}function nt(e){return Object.keys(e).length===0}function ce(e){const t={};for(const n in e)n[0]!=="$"&&(t[n]=e[n]);return t}function ie(e){return e==null?"":e}function it(e){return e&&De(e.destroy)?e.destroy:re}function c(e,t){e.appendChild(t)}function J(e,t,n){e.insertBefore(t,n||null)}function B(e){e.parentNode&&e.parentNode.removeChild(e)}function We(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function g(e){return document.createElement(e)}function ae(e){return document.createTextNode(e)}function D(){return ae(" ")}function Z(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function d(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function rt(e){return Array.from(e.childNodes)}function He(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function ze(e,t){e.value=t==null?"":t}function se(e,t,n,i){n===null?e.style.removeProperty(t):e.style.setProperty(t,n,i?"important":"")}function fe(e,t,n){e.classList[n?"add":"remove"](t)}function ut(e,t,{bubbles:n=!1,cancelable:i=!1}={}){const u=document.createEvent("CustomEvent");return u.initCustomEvent(e,n,i,t),u}let _e;function pe(e){_e=e}function st(){if(!_e)throw new Error("Function called outside component initialization");return _e}function ot(){const e=st();return(t,n,{cancelable:i=!1}={})=>{const u=e.$$.callbacks[t];if(u){const l=ut(t,n,{cancelable:i});return u.slice().forEach(o=>{o.call(e,l)}),!l.defaultPrevented}return!0}}const he=[],L=[],ve=[],Pe=[],lt=Promise.resolve();let Me=!1;function ft(){Me||(Me=!0,lt.then(Ze))}function Re(e){ve.push(e)}function F(e){Pe.push(e)}const Ce=new Set;let be=0;function Ze(){const e=_e;do{for(;be<he.length;){const t=he[be];be++,pe(t),ct(t.$$)}for(pe(null),he.length=0,be=0;L.length;)L.pop()();for(let t=0;t<ve.length;t+=1){const n=ve[t];Ce.has(n)||(Ce.add(n),n())}ve.length=0}while(he.length);for(;Pe.length;)Pe.pop()();Me=!1,Ce.clear(),pe(e)}function ct(e){if(e.fragment!==null){e.update(),$(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Re)}}const ye=new Set;let oe;function ke(){oe={r:0,c:[],p:oe}}function Se(){oe.r||$(oe.c),oe=oe.p}function A(e,t){e&&e.i&&(ye.delete(e),e.i(t))}function j(e,t,n,i){if(e&&e.o){if(ye.has(e))return;ye.add(e),oe.c.push(()=>{ye.delete(e),i&&(n&&e.d(1),i())}),e.o(t)}else i&&i()}function at(e,t){const n={},i={},u={$$scope:1};let l=e.length;for(;l--;){const o=e[l],r=t[l];if(r){for(const s in o)s in r||(i[s]=1);for(const s in r)u[s]||(n[s]=r[s],u[s]=1);e[l]=r}else for(const s in o)u[s]=1}for(const o in i)o in n||(n[o]=void 0);return n}function dt(e){return typeof e=="object"&&e!==null?e:{}}function U(e,t,n){const i=e.$$.props[t];i!==void 0&&(e.$$.bound[i]=n,n(e.$$.ctx[i]))}function Q(e){e&&e.c()}function G(e,t,n,i){const{fragment:u,after_update:l}=e.$$;u&&u.m(t,n),i||Re(()=>{const o=e.$$.on_mount.map(Qe).filter(De);e.$$.on_destroy?e.$$.on_destroy.push(...o):$(o),e.$$.on_mount=[]}),l.forEach(Re)}function X(e,t){const n=e.$$;n.fragment!==null&&($(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function mt(e,t){e.$$.dirty[0]===-1&&(he.push(e),ft(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function te(e,t,n,i,u,l,o,r=[-1]){const s=_e;pe(e);const f=e.$$={fragment:null,ctx:[],props:l,update:re,not_equal:u,bound:Le(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(s?s.$$.context:[])),callbacks:Le(),dirty:r,skip_bound:!1,root:t.target||s.$$.root};o&&o(f.root);let y=!1;if(f.ctx=n?n(e,t.props||{},(p,k,...S)=>{const C=S.length?S[0]:k;return f.ctx&&u(f.ctx[p],f.ctx[p]=C)&&(!f.skip_bound&&f.bound[p]&&f.bound[p](C),y&&mt(e,p)),k}):[],f.update(),y=!0,$(f.before_update),f.fragment=i?i(f.ctx):!1,t.target){if(t.hydrate){const p=rt(t.target);f.fragment&&f.fragment.l(p),p.forEach(B)}else f.fragment&&f.fragment.c();t.intro&&A(e.$$.fragment),G(e,t.target,t.anchor,t.customElement),Ze()}pe(s)}class ne{$destroy(){X(this,1),this.$destroy=re}$on(t,n){if(!De(n))return re;const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(n),()=>{const u=i.indexOf(n);u!==-1&&i.splice(u,1)}}$set(t){this.$$set&&!nt(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const ht="/timecard/assets/icon.110bac24.png";function xe(e){const t=e.getUTCHours().toString().padStart(2,"0"),n=e.getUTCMinutes().toString().padStart(2,"0"),i=e.getUTCSeconds().toString().padStart(2,"0");return`${t}:${n}:${i}`}function we(e){return!isNaN(parseInt(e.hour)+parseInt(e.minute)+parseInt(e.second))}function je(e){if(e.hour<0||e.hour>23||e.minute<0||e.minute>59||e.second<0||e.second>59)return;const t=new Date("1970-01-01");if(t.setUTCHours(e.hour),t.setUTCMinutes(e.minute),t.setUTCSeconds(e.second),!isNaN(t.valueOf()))return t}class pt{constructor(){Y(this,"tests",[])}get score(){let t=0;for(let n of this.tests)t+=n.score;return t}get scoreString(){return xe(new Date(this.score*1e3))}}class Ee{constructor(){Y(this,"enter");Y(this,"exit")}static fromTimes(t,n){const i=je(t),u=je(n);if(!i||!u||u<i)return;const l=new Ee;return l.enter=i,l.exit=u,l}get score(){return(this.exit.valueOf()-this.enter.valueOf())/1e3}get scoreString(){return xe(new Date(this.exit.valueOf()-this.enter.valueOf()))}}function _t(e){let t,n,i,u;return{c(){t=g("input"),d(t,"class",n=ie(e[10].class)+" svelte-8hu0a"),d(t,"style",e[5]),d(t,"placeholder",e[2]),d(t,"maxlength",e[3]),d(t,"pattern",e[4]),d(t,"inputmode",e[7]),fe(t,"error",!e[8](e[0]))},m(l,o){J(l,t,o),ze(t,e[0]),e[14](t),i||(u=[Z(t,"input",e[13]),Z(t,"blur",e[9]),it(e[6].call(null,t))],i=!0)},p(l,[o]){o&1024&&n!==(n=ie(l[10].class)+" svelte-8hu0a")&&d(t,"class",n),o&32&&d(t,"style",l[5]),o&4&&d(t,"placeholder",l[2]),o&8&&d(t,"maxlength",l[3]),o&16&&d(t,"pattern",l[4]),o&128&&d(t,"inputmode",l[7]),o&1&&t.value!==l[0]&&ze(t,l[0]),o&1281&&fe(t,"error",!l[8](l[0]))},i:re,o:re,d(l){l&&B(t),e[14](null),i=!1,$(u)}}}function gt(){let e=!!window.chrome;return e=e&&/Android|iPhone/i.test(navigator.userAgent),e?"numeric":void 0}function bt(e,t,n){let{placeholder:i=""}=t,{value:u=""}=t,{ref:l=null}=t,{pad:o=null}=t,{maxlength:r=null}=t,{pattern:s="[0-9]*"}=t,{validator:f=()=>!0}=t,{style:y}=t,{initRow:p=()=>{}}=t,{inputmode:k=gt()}=t;function S(a){return f(a)}function C(){o>0&&u&&S(u)&&u.length===1&&n(0,u=u.padStart(o,"0"))}function T(){u=this.value,n(0,u)}function q(a){L[a?"unshift":"push"](()=>{l=a,n(1,l)})}return e.$$set=a=>{n(10,t=le(le({},t),ce(a))),"placeholder"in a&&n(2,i=a.placeholder),"value"in a&&n(0,u=a.value),"ref"in a&&n(1,l=a.ref),"pad"in a&&n(11,o=a.pad),"maxlength"in a&&n(3,r=a.maxlength),"pattern"in a&&n(4,s=a.pattern),"validator"in a&&n(12,f=a.validator),"style"in a&&n(5,y=a.style),"initRow"in a&&n(6,p=a.initRow),"inputmode"in a&&n(7,k=a.inputmode)},t=ce(t),[u,l,i,r,s,y,p,k,S,C,t,o,f,T,q]}class Te extends ne{constructor(t){super(),te(this,t,bt,_t,ee,{placeholder:2,value:0,ref:1,pad:11,maxlength:3,pattern:4,validator:12,style:5,initRow:6,inputmode:7})}}function vt(e){let t,n,i,u;const l=[e[2],{pad:"2"},{maxlength:"2"},{style:"width:1.75em"}];function o(f){e[3](f)}function r(f){e[4](f)}let s={};for(let f=0;f<l.length;f+=1)s=le(s,l[f]);return e[0]!==void 0&&(s.value=e[0]),e[1]!==void 0&&(s.ref=e[1]),t=new Te({props:s}),L.push(()=>U(t,"value",o)),L.push(()=>U(t,"ref",r)),{c(){Q(t.$$.fragment)},m(f,y){G(t,f,y),u=!0},p(f,[y]){const p=y&4?at(l,[dt(f[2]),l[1],l[2],l[3]]):{};!n&&y&1&&(n=!0,p.value=f[0],F(()=>n=!1)),!i&&y&2&&(i=!0,p.ref=f[1],F(()=>i=!1)),t.$set(p)},i(f){u||(A(t.$$.fragment,f),u=!0)},o(f){j(t.$$.fragment,f),u=!1},d(f){X(t,f)}}}function yt(e,t,n){let{value:i}=t,{ref:u=null}=t;function l(r){i=r,n(0,i)}function o(r){u=r,n(1,u)}return e.$$set=r=>{n(2,t=le(le({},t),ce(r))),"value"in r&&n(0,i=r.value),"ref"in r&&n(1,u=r.ref)},t=ce(t),[i,u,t,l,o]}class qe extends ne{constructor(t){super(),te(this,t,yt,vt,ee,{value:0,ref:1})}}function wt(e){let t,n,i,u,l,o,r,s,f,y,p,k;function S(v){e[11](v)}function C(v){e[12](v)}let T={placeholder:"hh",class:e[9].initRow?"enterTime":"exitTime",validator:e[6],initRow:e[9].initRow};e[3]!==void 0&&(T.ref=e[3]),e[0]!==void 0&&(T.value=e[0]),t=new qe({props:T}),L.push(()=>U(t,"ref",S)),L.push(()=>U(t,"value",C));function q(v){e[13](v)}function a(v){e[14](v)}let b={placeholder:"mm",class:e[9].initRow?"enterTime":"exitTime",validator:e[7]};e[4]!==void 0&&(b.ref=e[4]),e[1]!==void 0&&(b.value=e[1]),l=new qe({props:b}),L.push(()=>U(l,"ref",q)),L.push(()=>U(l,"value",a));function m(v){e[15](v)}function h(v){e[16](v)}let _={placeholder:"ss",class:e[9].initRow?"enterTime":"exitTime",validator:e[8]};return e[5]!==void 0&&(_.ref=e[5]),e[2]!==void 0&&(_.value=e[2]),f=new qe({props:_}),L.push(()=>U(f,"ref",m)),L.push(()=>U(f,"value",h)),{c(){Q(t.$$.fragment),u=D(),Q(l.$$.fragment),s=D(),Q(f.$$.fragment)},m(v,w){G(t,v,w),J(v,u,w),G(l,v,w),J(v,s,w),G(f,v,w),k=!0},p(v,[w]){const H={};w&512&&(H.class=v[9].initRow?"enterTime":"exitTime"),w&512&&(H.initRow=v[9].initRow),!n&&w&8&&(n=!0,H.ref=v[3],F(()=>n=!1)),!i&&w&1&&(i=!0,H.value=v[0],F(()=>i=!1)),t.$set(H);const E={};w&512&&(E.class=v[9].initRow?"enterTime":"exitTime"),!o&&w&16&&(o=!0,E.ref=v[4],F(()=>o=!1)),!r&&w&2&&(r=!0,E.value=v[1],F(()=>r=!1)),l.$set(E);const K={};w&512&&(K.class=v[9].initRow?"enterTime":"exitTime"),!y&&w&32&&(y=!0,K.ref=v[5],F(()=>y=!1)),!p&&w&4&&(p=!0,K.value=v[2],F(()=>p=!1)),f.$set(K)},i(v){k||(A(t.$$.fragment,v),A(l.$$.fragment,v),A(f.$$.fragment,v),k=!0)},o(v){j(t.$$.fragment,v),j(l.$$.fragment,v),j(f.$$.fragment,v),k=!1},d(v){X(t,v),v&&B(u),X(l,v),v&&B(s),X(f,v)}}}function Ne(e,t){return n=>n===void 0||n===""?!0:!isNaN(parseInt(n))&&n>=e&&n<=t}function Fe(e,t,n=()=>!0){e&&e.length==2&&n(e)&&t.focus()}function kt(e,t,n){let{hour:i}=t,{minute:u}=t,{second:l}=t,{onSeconds:o=()=>{}}=t,{refHour:r}=t,s,f;const y=Ne(0,23),p=Ne(0,59),k=Ne(0,59);function S(){l&&l.length==2&&k(l)&&o()}function C(h){r=h,n(3,r)}function T(h){i=h,n(0,i)}function q(h){s=h,n(4,s)}function a(h){u=h,n(1,u)}function b(h){f=h,n(5,f)}function m(h){l=h,n(2,l)}return e.$$set=h=>{n(9,t=le(le({},t),ce(h))),"hour"in h&&n(0,i=h.hour),"minute"in h&&n(1,u=h.minute),"second"in h&&n(2,l=h.second),"onSeconds"in h&&n(10,o=h.onSeconds),"refHour"in h&&n(3,r=h.refHour)},e.$$.update=()=>{e.$$.dirty&17&&Fe(i,s,y),e.$$.dirty&34&&Fe(u,f,p),e.$$.dirty&4&&S(),e.$$.dirty&7},t=ce(t),[i,u,l,r,s,f,y,p,k,t,o,C,T,q,a,b,m]}class Ue extends ne{constructor(t){super(),te(this,t,kt,wt,ee,{hour:0,minute:1,second:2,onSeconds:10,refHour:3})}}function St(e){let t,n,i=e[2]+1+"",u,l,o,r,s,f,y,p,k,S,C,T,q,a,b,m,h,_,v,w,H,E;function K(R){e[7](R)}function M(R){e[8](R)}function ue(R){e[9](R)}let N={initRow:Et,onSeconds:e[6]};e[0].hour!==void 0&&(N.hour=e[0].hour),e[0].minute!==void 0&&(N.minute=e[0].minute),e[0].second!==void 0&&(N.second=e[0].second),f=new Ue({props:N}),L.push(()=>U(f,"hour",K)),L.push(()=>U(f,"minute",M)),L.push(()=>U(f,"second",ue));function O(R){e[10](R)}function x(R){e[11](R)}function I(R){e[12](R)}function P(R){e[13](R)}let z={};return e[3]!==void 0&&(z.refHour=e[3]),e[1].hour!==void 0&&(z.hour=e[1].hour),e[1].minute!==void 0&&(z.minute=e[1].minute),e[1].second!==void 0&&(z.second=e[1].second),T=new Ue({props:z}),L.push(()=>U(T,"refHour",O)),L.push(()=>U(T,"hour",x)),L.push(()=>U(T,"minute",I)),L.push(()=>U(T,"second",P)),{c(){t=g("tr"),n=g("td"),u=ae(i),l=D(),o=g("button"),o.textContent="\u274C",r=D(),s=g("td"),Q(f.$$.fragment),S=D(),C=g("td"),Q(T.$$.fragment),h=D(),_=g("td"),v=g("input"),d(n,"class","svelte-12q6ax7"),d(s,"class","svelte-12q6ax7"),d(C,"class","svelte-12q6ax7"),v.disabled=!0,v.value=e[4],d(v,"class","score svelte-12q6ax7"),d(_,"class","svelte-12q6ax7")},m(R,W){J(R,t,W),c(t,n),c(n,u),c(n,l),c(n,o),c(t,r),c(t,s),G(f,s,null),c(t,S),c(t,C),G(T,C,null),c(t,h),c(t,_),c(_,v),w=!0,H||(E=Z(o,"click",e[5]),H=!0)},p(R,[W]){(!w||W&4)&&i!==(i=R[2]+1+"")&&He(u,i);const de={};W&8&&(de.onSeconds=R[6]),!y&&W&1&&(y=!0,de.hour=R[0].hour,F(()=>y=!1)),!p&&W&1&&(p=!0,de.minute=R[0].minute,F(()=>p=!1)),!k&&W&1&&(k=!0,de.second=R[0].second,F(()=>k=!1)),f.$set(de);const me={};!q&&W&8&&(q=!0,me.refHour=R[3],F(()=>q=!1)),!a&&W&2&&(a=!0,me.hour=R[1].hour,F(()=>a=!1)),!b&&W&2&&(b=!0,me.minute=R[1].minute,F(()=>b=!1)),!m&&W&2&&(m=!0,me.second=R[1].second,F(()=>m=!1)),T.$set(me),(!w||W&16&&v.value!==R[4])&&(v.value=R[4])},i(R){w||(A(f.$$.fragment,R),A(T.$$.fragment,R),w=!0)},o(R){j(f.$$.fragment,R),j(T.$$.fragment,R),w=!1},d(R){R&&B(t),X(f),X(T),H=!1,E()}}}function Et(e){e.focus()}function Tt(e,t,n){let i;const u=ot();function l(){u("delete",{index:o})}let{index:o}=t,{testDatumEnter:r}=t,{testDatumExit:s}=t;function f(m,h){if(we(m)&&we(h)){const _=Ee.fromTimes(m,h);if(_)return _.scoreString}return""}let y;const p=()=>{y.focus()};function k(m){e.$$.not_equal(r.hour,m)&&(r.hour=m,n(0,r))}function S(m){e.$$.not_equal(r.minute,m)&&(r.minute=m,n(0,r))}function C(m){e.$$.not_equal(r.second,m)&&(r.second=m,n(0,r))}function T(m){y=m,n(3,y)}function q(m){e.$$.not_equal(s.hour,m)&&(s.hour=m,n(1,s))}function a(m){e.$$.not_equal(s.minute,m)&&(s.minute=m,n(1,s))}function b(m){e.$$.not_equal(s.second,m)&&(s.second=m,n(1,s))}return e.$$set=m=>{"index"in m&&n(2,o=m.index),"testDatumEnter"in m&&n(0,r=m.testDatumEnter),"testDatumExit"in m&&n(1,s=m.testDatumExit)},e.$$.update=()=>{e.$$.dirty&3&&n(4,i=f(r,s))},[r,s,o,y,i,l,p,k,S,C,T,q,a,b]}class Ct extends ne{constructor(t){super(),te(this,t,Tt,St,ee,{index:2,testDatumEnter:0,testDatumExit:1})}}function Be(e,t,n){const i=e.slice();return i[8]=t[n],i[9]=t,i[10]=n,i}function Ve(e){let t,n,i,u;function l(s){e[5](s,e[8])}function o(s){e[6](s,e[8])}let r={index:e[10]};return e[8].enter!==void 0&&(r.testDatumEnter=e[8].enter),e[8].exit!==void 0&&(r.testDatumExit=e[8].exit),t=new Ct({props:r}),L.push(()=>U(t,"testDatumEnter",l)),L.push(()=>U(t,"testDatumExit",o)),t.$on("delete",e[4]),{c(){Q(t.$$.fragment)},m(s,f){G(t,s,f),u=!0},p(s,f){e=s;const y={};!n&&f&1&&(n=!0,y.testDatumEnter=e[8].enter,F(()=>n=!1)),!i&&f&1&&(i=!0,y.testDatumExit=e[8].exit,F(()=>i=!1)),t.$set(y)},i(s){u||(A(t.$$.fragment,s),u=!0)},o(s){j(t.$$.fragment,s),u=!1},d(s){X(t,s)}}}function qt(e){let t,n,i,u,l,o,r,s,f,y,p,k,S,C,T,q,a,b,m,h=e[0],_=[];for(let w=0;w<h.length;w+=1)_[w]=Ve(Be(e,h,w));const v=w=>j(_[w],1,1,()=>{_[w]=null});return{c(){t=g("table"),n=g("thead"),n.innerHTML=`<tr><th class="svelte-1670vm0">Test #</th> 
            <th class="svelte-1670vm0">Time In</th> 
            <th class="svelte-1670vm0">Time Out</th> 
            <th class="svelte-1670vm0">Score</th></tr>`,i=D(),u=g("tbody");for(let w=0;w<_.length;w+=1)_[w].c();l=D(),o=g("tfoot"),r=g("tr"),s=g("th"),f=g("div"),y=ae("Total Score: "),p=g("span"),k=ae(e[1]),S=D(),C=g("button"),C.textContent="Add a Test",T=D(),q=g("button"),q.textContent="Reset",d(p,"class","score"),d(f,"id","overallScore"),d(C,"id","addTest"),d(q,"id","reset"),d(s,"colspan","4"),d(s,"class","svelte-1670vm0"),d(o,"class","svelte-1670vm0"),d(t,"class","svelte-1670vm0")},m(w,H){J(w,t,H),c(t,n),c(t,i),c(t,u);for(let E=0;E<_.length;E+=1)_[E].m(u,null);c(t,l),c(t,o),c(o,r),c(r,s),c(s,f),c(f,y),c(f,p),c(p,k),c(s,S),c(s,C),c(s,T),c(s,q),a=!0,b||(m=[Z(C,"click",e[2]),Z(q,"click",e[3])],b=!0)},p(w,[H]){if(H&17){h=w[0];let E;for(E=0;E<h.length;E+=1){const K=Be(w,h,E);_[E]?(_[E].p(K,H),A(_[E],1)):(_[E]=Ve(K),_[E].c(),A(_[E],1),_[E].m(u,null))}for(ke(),E=h.length;E<_.length;E+=1)v(E);Se()}(!a||H&2)&&He(k,w[1])},i(w){if(!a){for(let H=0;H<h.length;H+=1)A(_[H]);a=!0}},o(w){_=_.filter(Boolean);for(let H=0;H<_.length;H+=1)j(_[H]);a=!1},d(w){w&&B(t),We(_,w),b=!1,$(m)}}}function Ge(){const e=[];for(let n=0;n<1;n++)e.push({enter:{hour:"",minute:"",second:""},exit:{hour:"",minute:"",second:""}});return e}function Nt(e,t,n){let i,u=Ge();function l(){n(0,u[u.length]={enter:{hour:"",minute:"",second:""},exit:{hour:"",minute:"",second:""}},u)}function o(){window.confirm("Are you sure you want to reset the Sprint Enduro?")&&n(0,u=Ge())}function r(){let p=new pt;for(let k of u)if(we(k.enter)&&we(k.exit)){const S=Ee.fromTimes(k.enter,k.exit);S&&p.tests.push(S)}return p.scoreString}function s(p){window.confirm(`You sure you want to delete test ${p.detail.index+1}?`)&&n(0,u=u.filter((k,S)=>S!==p.detail.index))}function f(p,k){e.$$.not_equal(k.enter,p)&&(k.enter=p,n(0,u))}function y(p,k){e.$$.not_equal(k.exit,p)&&(k.exit=p,n(0,u))}return e.$$.update=()=>{e.$$.dirty&1&&n(1,i=r())},[u,i,l,o,s,f,y]}class Pt extends ne{constructor(t){super(),te(this,t,Nt,qt,ee,{})}}var V=(e=>(e[e.Start=0]="Start",e[e.Known=1]="Known",e[e.Secret=2]="Secret",e[e.Emergency=3]="Emergency",e))(V||{});class Ke{constructor(t){Y(this,"type",0);Y(this,"minute",0);Y(this,"seconds",0);this.minute=t}points(t){let n=0;return this.minute>=t&&(n=this.minute-t),n}disqualified(t){return!1}}class $e extends Ke{constructor(n){super(n);Y(this,"type",1)}disqualified(n){return n-this.minute>15}}class Ie{constructor(t){Y(this,"type",2);Y(this,"minute",0);Y(this,"seconds",0);this.minute=t}points(t){let n=0;return this.minute>=t?n=this.minute-t:n=5*(t-this.minute)-3,n}disqualified(t){return!1}}class Ae extends Ie{constructor(n,i){super(n);Y(this,"type",3);this.seconds=i}emergencyPoints(n){return this.minute==n?Math.abs(this.seconds-30):this.minute>n?30+this.seconds+60*(this.minute-n-1):30+(60-this.seconds)+60*(n-this.minute-1)}}class Mt{constructor(t){Y(this,"riderMinute",1);Y(this,"checkpoints",[]);console.assert(t>=1),this.riderMinute=t}get points(){return this.checkpoints.map(t=>t.points(this.riderMinute)).reduce((t,n)=>t+n,0)}get emergencyPoints(){return this.checkpoints.map(t=>t instanceof Ae?t.emergencyPoints(this.riderMinute):0).reduce((t,n)=>t+n,0)}get disqualified(){return this.checkpoints.some(t=>t.disqualified(this.riderMinute))}}function Xe(e){let t,n,i;function u(o){e[9](o)}let l={validator:Kt,class:e[2],size:"2",style:"width:2em"};return e[0].seconds!==void 0&&(l.value=e[0].seconds),t=new Te({props:l}),L.push(()=>U(t,"value",u)),{c(){Q(t.$$.fragment)},m(o,r){G(t,o,r),i=!0},p(o,r){const s={};r&4&&(s.class=o[2]),!n&&r&1&&(n=!0,s.value=o[0].seconds,F(()=>n=!1)),t.$set(s)},i(o){i||(A(t.$$.fragment,o),i=!0)},o(o){j(t.$$.fragment,o),i=!1},d(o){X(t,o)}}}function Rt(e){let t,n,i,u,l,o,r=e[1]+1+"",s,f,y,p,k,S,C,T,q,a,b,m,h,_,v,w,H,E,K,M,ue,N;function O(P){e[8](P)}let x={pattern:null,validator:Ht,initRow:Dt,class:e[2],size:"3",style:"width:2em"};e[0].minute!==void 0&&(x.value=e[0].minute),p=new Te({props:x}),L.push(()=>U(p,"value",O));let I=e[0].type===V.Emergency&&Xe(e);return{c(){t=g("tr"),n=g("td"),i=g("img"),l=D(),o=g("td"),s=ae(r),f=D(),y=g("td"),Q(p.$$.fragment),S=D(),C=g("td"),I&&I.c(),T=D(),q=g("td"),a=g("input"),m=D(),h=g("td"),_=g("input"),w=D(),H=g("td"),E=g("input"),Oe(i.src,u=e[3])||d(i,"src",u),d(i,"alt","Flag"),d(i,"class","svelte-1ym5x0u"),d(n,"class","svelte-1ym5x0u"),d(o,"class","svelte-1ym5x0u"),d(y,"class","svelte-1ym5x0u"),d(C,"class","svelte-1ym5x0u"),d(a,"class",b=ie(e[2])+" svelte-1ym5x0u"),a.disabled=!0,a.value=e[5],d(a,"size","3"),se(a,"width","2em"),d(q,"class","svelte-1ym5x0u"),d(_,"class",v=ie(e[2])+" svelte-1ym5x0u"),_.disabled=!0,_.value=e[4],d(_,"size","4"),se(_,"width","3em"),d(h,"class","svelte-1ym5x0u"),d(E,"type","checkbox"),d(E,"class","svelte-1ym5x0u"),d(H,"class","svelte-1ym5x0u"),d(t,"class",K=ie(e[2])+" svelte-1ym5x0u")},m(P,z){J(P,t,z),c(t,n),c(n,i),c(t,l),c(t,o),c(o,s),c(t,f),c(t,y),G(p,y,null),c(t,S),c(t,C),I&&I.m(C,null),c(t,T),c(t,q),c(q,a),c(t,m),c(t,h),c(h,_),c(t,w),c(t,H),c(H,E),E.checked=e[0].drop,M=!0,ue||(N=[Z(i,"click",e[6]),Z(i,"keydown",It),Z(E,"change",e[10])],ue=!0)},p(P,[z]){(!M||z&8&&!Oe(i.src,u=P[3]))&&d(i,"src",u),(!M||z&2)&&r!==(r=P[1]+1+"")&&He(s,r);const R={};z&4&&(R.class=P[2]),!k&&z&1&&(k=!0,R.value=P[0].minute,F(()=>k=!1)),p.$set(R),P[0].type===V.Emergency?I?(I.p(P,z),z&1&&A(I,1)):(I=Xe(P),I.c(),A(I,1),I.m(C,null)):I&&(ke(),j(I,1,1,()=>{I=null}),Se()),(!M||z&4&&b!==(b=ie(P[2])+" svelte-1ym5x0u"))&&d(a,"class",b),(!M||z&32&&a.value!==P[5])&&(a.value=P[5]),(!M||z&4&&v!==(v=ie(P[2])+" svelte-1ym5x0u"))&&d(_,"class",v),(!M||z&16&&_.value!==P[4])&&(_.value=P[4]),z&1&&(E.checked=P[0].drop),(!M||z&4&&K!==(K=ie(P[2])+" svelte-1ym5x0u"))&&d(t,"class",K)},i(P){M||(A(p.$$.fragment,P),A(I),M=!0)},o(P){j(p.$$.fragment,P),j(I),M=!1},d(P){P&&B(t),X(p),I&&I.d(),ue=!1,$(N)}}}function Dt(e){e.focus()}function Ht(e){return!(e==null||e==="")}function Kt(e){return e===void 0||e===""?!1:!isNaN(parseInt(e))&&e>=0&&e<=59}const It=()=>{};function At(e,t,n){let i,u,l,o,{check:r}=t,{index:s}=t,{riderMinute:f}=t;function y(b){const m=parseInt(b.minute);if(isNaN(m))return null;switch(b.type){case V.Emergency:const h=parseInt(b.seconds);if(!isNaN(h))return new Ae(m,h);break;case V.Known:return new $e(m);case V.Secret:return new Ie(m);case V.Start:return new Ke(m)}return null}function p(b,m){const h=y(b);return h?h.points(m):0}function k(b,m){const h=y(b);return h&&h.type===V.Emergency?h.emergencyPoints(m):0}function S(b){return{[V.Start]:"./images/start.png",[V.Known]:"./images/known.png",[V.Secret]:"./images/secret.png",[V.Emergency]:"./images/emergency.png"}[b.type]}function C(){n(0,r.type=(r.type+1)%4,r)}function T(b){e.$$.not_equal(r.minute,b)&&(r.minute=b,n(0,r))}function q(b){e.$$.not_equal(r.seconds,b)&&(r.seconds=b,n(0,r))}function a(){r.drop=this.checked,n(0,r)}return e.$$set=b=>{"check"in b&&n(0,r=b.check),"index"in b&&n(1,s=b.index),"riderMinute"in b&&n(7,f=b.riderMinute)},e.$$.update=()=>{e.$$.dirty&129&&n(5,i=p(r,f)),e.$$.dirty&129&&n(4,u=k(r,f)),e.$$.dirty&1&&n(3,l=S(r)),e.$$.dirty&1&&n(2,o=r.drop?"dropped":"")},[r,s,o,l,u,i,C,f,T,q,a]}class Lt extends ne{constructor(t){super(),te(this,t,At,Rt,ee,{check:0,index:1,riderMinute:7})}}function Ot(e){let t,n,i,u,l,o,r,s,f,y,p,k,S,C,T,q;return{c(){t=g("table"),n=g("tbody"),i=g("tr"),i.innerHTML=`<th class="svelte-1t04yu8">Checks</th> 
            <th class="svelte-1t04yu8">Points</th> 
            <th class="svelte-1t04yu8">Emergency<br/>Points</th> 
            <th class="svelte-1t04yu8">Disqualified</th>`,u=D(),l=g("tr"),o=g("td"),r=g("input"),s=D(),f=g("td"),y=g("input"),p=D(),k=g("td"),S=g("input"),C=D(),T=g("td"),q=g("input"),d(r,"id","checks"),r.disabled=!0,r.value=e[0],d(r,"size","2"),se(r,"width","2em"),d(r,"class","svelte-1t04yu8"),d(o,"class","svelte-1t04yu8"),d(y,"id","points"),y.disabled=!0,y.value=e[1],d(y,"size","4"),se(y,"width","3em"),d(y,"class","svelte-1t04yu8"),d(f,"class","svelte-1t04yu8"),d(S,"id","emergencyPoints"),S.disabled=!0,S.value=e[2],d(S,"size","4"),se(S,"width","3em"),d(S,"class","svelte-1t04yu8"),d(k,"class","svelte-1t04yu8"),d(q,"id","disqualified"),q.disabled=!0,q.value=e[3],d(q,"size","4"),se(q,"width","3em"),d(q,"class","svelte-1t04yu8"),d(T,"class","svelte-1t04yu8"),se(t,"margin","auto")},m(a,b){J(a,t,b),c(t,n),c(n,i),c(n,u),c(n,l),c(l,o),c(o,r),c(l,s),c(l,f),c(f,y),c(l,p),c(l,k),c(k,S),c(l,C),c(l,T),c(T,q)},p(a,[b]){b&1&&r.value!==a[0]&&(r.value=a[0]),b&2&&y.value!==a[1]&&(y.value=a[1]),b&4&&S.value!==a[2]&&(S.value=a[2]),b&8&&q.value!==a[3]&&(q.value=a[3])},i:re,o:re,d(a){a&&B(t)}}}function zt(e,t,n){let{totalChecks:i}=t,{points:u}=t,{emergencyPoints:l}=t,{disqualified:o}=t;return e.$$set=r=>{"totalChecks"in r&&n(0,i=r.totalChecks),"points"in r&&n(1,u=r.points),"emergencyPoints"in r&&n(2,l=r.emergencyPoints),"disqualified"in r&&n(3,o=r.disqualified)},[i,u,l,o]}class jt extends ne{constructor(t){super(),te(this,t,zt,Ot,ee,{totalChecks:0,points:1,emergencyPoints:2,disqualified:3})}}function Ye(e,t,n){const i=e.slice();return i[16]=t[n],i[17]=t,i[18]=n,i}function Je(e){let t,n,i;function u(o){e[9](o,e[16],e[17],e[18])}let l={riderMinute:e[0],index:e[18]};return e[16]!==void 0&&(l.check=e[16]),t=new Lt({props:l}),L.push(()=>U(t,"check",u)),{c(){Q(t.$$.fragment)},m(o,r){G(t,o,r),i=!0},p(o,r){e=o;const s={};r&1&&(s.riderMinute=e[0]),!n&&r&2&&(n=!0,s.check=e[16],F(()=>n=!1)),t.$set(s)},i(o){i||(A(t.$$.fragment,o),i=!0)},o(o){j(t.$$.fragment,o),i=!1},d(o){X(t,o)}}}function Ft(e){let t,n,i,u,l,o,r,s,f,y,p,k,S,C,T,q,a,b,m,h,_,v,w;function H(N){e[8](N)}let E={validator:Bt,size:"3",min:"1",style:"width:3em"};e[0]!==void 0&&(E.value=e[0]),i=new Te({props:E}),L.push(()=>U(i,"value",H));let K=e[1],M=[];for(let N=0;N<K.length;N+=1)M[N]=Je(Ye(e,K,N));const ue=N=>j(M[N],1,1,()=>{M[N]=null});return C=new jt({props:{totalChecks:e[3],points:e[5],emergencyPoints:e[4],disqualified:e[2]}}),{c(){t=g("div"),n=ae("Rider Minute: "),Q(i.$$.fragment),l=D(),o=g("table"),r=g("thead"),r.innerHTML=`<tr><th class="svelte-1976845"></th> 
            <th class="svelte-1976845">#</th> 
            <th class="svelte-1976845">Minute</th> 
            <th class="svelte-1976845">Second</th> 
            <th class="svelte-1976845">Points</th> 
            <th class="svelte-1976845">Emergency<br/>Points</th> 
            <th class="svelte-1976845">Drop</th></tr>`,s=D(),f=g("tbody");for(let N=0;N<M.length;N+=1)M[N].c();y=D(),p=g("tfoot"),k=g("tr"),S=g("td"),Q(C.$$.fragment),T=D(),q=g("tr"),a=g("th"),b=g("button"),b.textContent="Add a Check",m=D(),h=g("button"),h.textContent="Reset",d(t,"id","riderMinute"),d(t,"class","svelte-1976845"),d(S,"colspan","7"),d(b,"id","addCheck"),d(h,"id","reset"),d(a,"colspan","7"),d(a,"class","svelte-1976845"),d(p,"class","svelte-1976845"),d(o,"class","svelte-1976845")},m(N,O){J(N,t,O),c(t,n),G(i,t,null),J(N,l,O),J(N,o,O),c(o,r),c(o,s),c(o,f);for(let x=0;x<M.length;x+=1)M[x].m(f,null);c(o,y),c(o,p),c(p,k),c(k,S),G(C,S,null),c(p,T),c(p,q),c(q,a),c(a,b),c(a,m),c(a,h),_=!0,v||(w=[Z(b,"click",e[6]),Z(h,"click",e[7])],v=!0)},p(N,[O]){const x={};if(!u&&O&1&&(u=!0,x.value=N[0],F(()=>u=!1)),i.$set(x),O&3){K=N[1];let P;for(P=0;P<K.length;P+=1){const z=Ye(N,K,P);M[P]?(M[P].p(z,O),A(M[P],1)):(M[P]=Je(z),M[P].c(),A(M[P],1),M[P].m(f,null))}for(ke(),P=K.length;P<M.length;P+=1)ue(P);Se()}const I={};O&8&&(I.totalChecks=N[3]),O&32&&(I.points=N[5]),O&16&&(I.emergencyPoints=N[4]),O&4&&(I.disqualified=N[2]),C.$set(I)},i(N){if(!_){A(i.$$.fragment,N);for(let O=0;O<K.length;O+=1)A(M[O]);A(C.$$.fragment,N),_=!0}},o(N){j(i.$$.fragment,N),M=M.filter(Boolean);for(let O=0;O<M.length;O+=1)j(M[O]);j(C.$$.fragment,N),_=!1},d(N){N&&B(t),X(i),N&&B(l),N&&B(o),We(M,N),X(C),v=!1,$(w)}}}function Ut(e){return e.length-e.filter(t=>t.drop).length}function Bt(e){return e===void 0||e===""?!1:!isNaN(parseInt(e))&&e>=1}function Vt(e,t,n){let i,u,l,o,r=1,s=f(1);function f(m){const h=[];for(let _=0;_<m;_++)h.push({type:V.Secret,minute:r,seconds:30,drop:!1});return h}function y(){n(1,s[s.length]={type:V.Secret,minute:r,seconds:30,drop:!1},s)}function p(){window.confirm("Are you sure you want to reset the score card?")&&(n(0,r=1),n(1,s=f(1)))}function k(m){const h=parseInt(m.minute);if(isNaN(h))return null;switch(m.type){case V.Emergency:const _=parseInt(m.seconds);if(!isNaN(_))return new Ae(h,_);break;case V.Known:return new $e(h);case V.Secret:return new Ie(h);case V.Start:return new Ke(h)}return null}function S(m,h){if(m<1)return null;const _=new Mt(m);for(let v of h){const w=k(v);!v.drop&&w&&_.checkpoints.push(w)}return _}function C(m,h){const _=S(m,h);return _?_.points:"0"}function T(m,h){const _=S(m,h);return _?_.emergencyPoints:"0"}function q(m,h){const _=S(m,h);return _&&_.disqualified?"YES":"NO"}function a(m){r=m,n(0,r)}function b(m,h,_,v){_[v]=m,n(1,s)}return e.$$.update=()=>{e.$$.dirty&3&&n(5,i=C(r,s)),e.$$.dirty&3&&n(4,u=T(r,s)),e.$$.dirty&2&&n(3,l=Ut(s)),e.$$.dirty&3&&n(2,o=q(r,s))},[r,s,o,l,u,i,y,p,a,b]}class Gt extends ne{constructor(t){super(),te(this,t,Vt,Ft,ee,{})}}function Xt(e){let t,n,i,u,l,o,r;return o=new Gt({}),{c(){t=g("div"),n=g("h2"),n.textContent="Time Keeper Enduro",i=D(),u=g("p"),u.textContent="Tap Flags to change check type.",l=D(),Q(o.$$.fragment),d(t,"id","timeKeeper")},m(s,f){J(s,t,f),c(t,n),c(t,i),c(t,u),c(t,l),G(o,t,null),r=!0},i(s){r||(A(o.$$.fragment,s),r=!0)},o(s){j(o.$$.fragment,s),r=!1},d(s){s&&B(t),X(o)}}}function Yt(e){let t,n,i,u,l,o,r;return o=new Pt({}),{c(){t=g("div"),n=g("h2"),n.textContent="Sprint Enduro",i=D(),u=g("p"),u.innerHTML="Enter <b>Hours</b> in 24 Hour Time, e.g. 2PM == 14",l=D(),Q(o.$$.fragment),d(t,"id","sprint")},m(s,f){J(s,t,f),c(t,n),c(t,i),c(t,u),c(t,l),G(o,t,null),r=!0},i(s){r||(A(o.$$.fragment,s),r=!0)},o(s){j(o.$$.fragment,s),r=!1},d(s){s&&B(t),X(o)}}}function Jt(e){let t,n,i,u,l,o,r,s,f,y,p,k,S,C,T,q,a,b,m,h,_;const v=[Yt,Xt],w=[];function H(E,K){return E[0]==="sprint"?0:1}return a=H(e),b=w[a]=v[a](e),{c(){t=g("meta"),n=g("meta"),i=g("link"),u=g("meta"),l=g("link"),o=D(),r=g("main"),s=g("center"),f=g("h1"),f.textContent="Enduro Time Card",y=D(),p=g("p"),p.innerHTML=`Verify Enduro score cards using this tool. Races are busy places and with
      hundreds of riders, hard working club members sometimes make mistakes.
      <a href="https://mobilesyrup.com/2020/05/24/how-install-progressive-web-app-pwa-android-ios-pc-mac/"><b>Install</b></a> onto your phone before the race!`,k=D(),S=g("button"),S.textContent="Sprint",C=D(),T=g("button"),T.textContent="Time Keeper",q=D(),b.c(),d(t,"name","apple-mobile-web-app-capable"),d(t,"content","yes"),d(n,"name","viewport"),d(n,"content","width=device-width, initial-scale=1, maximum-scale=1"),d(i,"rel","apple-touch-icon"),d(i,"href",ht),d(u,"name","apple-mobile-web-app-title"),d(u,"content","Enduro Time Card"),d(l,"red","manifest"),d(l,"crossorigin","use-credentials"),d(l,"href","manifest.json"),d(S,"class","svelte-py93mz"),fe(S,"selected",e[0]==="sprint"),d(T,"class","svelte-py93mz"),fe(T,"selected",e[0]==="timeKeeper")},m(E,K){c(document.head,t),c(document.head,n),c(document.head,i),c(document.head,u),c(document.head,l),J(E,o,K),J(E,r,K),c(r,s),c(s,f),c(s,y),c(s,p),c(s,k),c(s,S),c(s,C),c(s,T),c(s,q),w[a].m(s,null),m=!0,h||(_=[Z(S,"click",e[2]),Z(T,"click",e[3])],h=!0)},p(E,[K]){(!m||K&1)&&fe(S,"selected",E[0]==="sprint"),(!m||K&1)&&fe(T,"selected",E[0]==="timeKeeper");let M=a;a=H(E),a!==M&&(ke(),j(w[M],1,1,()=>{w[M]=null}),Se(),b=w[a],b||(b=w[a]=v[a](E),b.c()),A(b,1),b.m(s,null))},i(E){m||(A(b),m=!0)},o(E){j(b),m=!1},d(E){B(t),B(n),B(i),B(u),B(l),E&&B(o),E&&B(r),w[a].d(),h=!1,$(_)}}}function Qt(e,t,n){let i="sprint";function u(r){i!==r&&window.confirm("Switching time cards will lose all data. Are you sure?")&&n(0,i=r)}return[i,u,()=>u("sprint"),()=>u("timeKeeper")]}class Wt extends ne{constructor(t){super(),te(this,t,Qt,Jt,ee,{})}}new Wt({target:document.getElementById("app")});
