var Ve=Object.defineProperty;var Ye=(t,e,n)=>e in t?Ve(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var I=(t,e,n)=>(Ye(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerpolicy&&(o.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?o.credentials="include":r.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();function B(){}function ge(t,e){for(const n in e)t[n]=e[n];return t}function Le(t){return t()}function qe(){return Object.create(null)}function $(t){t.forEach(Le)}function we(t){return typeof t=="function"}function X(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let ie;function Ce(t,e){return ie||(ie=document.createElement("a")),ie.href=e,t===ie.href}function Ge(t){return Object.keys(t).length===0}function Pe(t){const e={};for(const n in t)n[0]!=="$"&&(e[n]=t[n]);return e}function ee(t){return t==null?"":t}function We(t){return t&&we(t.destroy)?t.destroy:B}function c(t,e){t.appendChild(e)}function F(t,e,n){t.insertBefore(e,n||null)}function A(t){t.parentNode&&t.parentNode.removeChild(t)}function Re(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function d(t){return document.createElement(t)}function Q(t){return document.createTextNode(t)}function D(){return Q(" ")}function H(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function a(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function De(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const s in e)e[s]==null?t.removeAttribute(s):s==="style"?t.style.cssText=e[s]:s==="__value"?t.value=t[s]=e[s]:n[s]&&n[s].set?t[s]=e[s]:a(t,s,e[s])}function Je(t){return Array.from(t.childNodes)}function ae(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function le(t,e){t.value=e==null?"":e}function W(t,e,n,s){n===null?t.style.removeProperty(e):t.style.setProperty(e,n,s?"important":"")}function te(t,e,n){t.classList[n?"add":"remove"](e)}function Qe(t,e,{bubbles:n=!1,cancelable:s=!1}={}){const r=document.createEvent("CustomEvent");return r.initCustomEvent(t,n,s,e),r}let re;function se(t){re=t}function Xe(){if(!re)throw new Error("Function called outside component initialization");return re}function Ie(){const t=Xe();return(e,n,{cancelable:s=!1}={})=>{const r=t.$$.callbacks[e];if(r){const o=Qe(e,n,{cancelable:s});return r.slice().forEach(l=>{l.call(t,o)}),!o.defaultPrevented}return!0}}const ne=[],fe=[],oe=[],ve=[],Ze=Promise.resolve();let ye=!1;function xe(){ye||(ye=!0,Ze.then(Fe))}function be(t){oe.push(t)}function He(t){ve.push(t)}const _e=new Set;let ue=0;function Fe(){const t=re;do{for(;ue<ne.length;){const e=ne[ue];ue++,se(e),et(e.$$)}for(se(null),ne.length=0,ue=0;fe.length;)fe.pop()();for(let e=0;e<oe.length;e+=1){const n=oe[e];_e.has(n)||(_e.add(n),n())}oe.length=0}while(ne.length);for(;ve.length;)ve.pop()();ye=!1,_e.clear(),se(t)}function et(t){if(t.fragment!==null){t.update(),$(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(be)}}const ce=new Set;let J;function de(){J={r:0,c:[],p:J}}function me(){J.r||$(J.c),J=J.p}function j(t,e){t&&t.i&&(ce.delete(t),t.i(e))}function L(t,e,n,s){if(t&&t.o){if(ce.has(t))return;ce.add(t),J.c.push(()=>{ce.delete(t),s&&(n&&t.d(1),s())}),t.o(e)}else s&&s()}function tt(t,e){const n={},s={},r={$$scope:1};let o=t.length;for(;o--;){const l=t[o],u=e[o];if(u){for(const i in l)i in u||(s[i]=1);for(const i in u)r[i]||(n[i]=u[i],r[i]=1);t[o]=u}else for(const i in l)r[i]=1}for(const l in s)l in n||(n[l]=void 0);return n}function $e(t,e,n){const s=t.$$.props[e];s!==void 0&&(t.$$.bound[s]=n,n(t.$$.ctx[s]))}function G(t){t&&t.c()}function V(t,e,n,s){const{fragment:r,after_update:o}=t.$$;r&&r.m(e,n),s||be(()=>{const l=t.$$.on_mount.map(Le).filter(we);t.$$.on_destroy?t.$$.on_destroy.push(...l):$(l),t.$$.on_mount=[]}),o.forEach(be)}function Y(t,e){const n=t.$$;n.fragment!==null&&($(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function nt(t,e){t.$$.dirty[0]===-1&&(ne.push(t),xe(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Z(t,e,n,s,r,o,l,u=[-1]){const i=re;se(t);const f=t.$$={fragment:null,ctx:[],props:o,update:B,not_equal:r,bound:qe(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(i?i.$$.context:[])),callbacks:qe(),dirty:u,skip_bound:!1,root:e.target||i.$$.root};l&&l(f.root);let m=!1;if(f.ctx=n?n(t,e.props||{},(p,k,...b)=>{const N=b.length?b[0]:k;return f.ctx&&r(f.ctx[p],f.ctx[p]=N)&&(!f.skip_bound&&f.bound[p]&&f.bound[p](N),m&&nt(t,p)),k}):[],f.update(),m=!0,$(f.before_update),f.fragment=s?s(f.ctx):!1,e.target){if(e.hydrate){const p=Je(e.target);f.fragment&&f.fragment.l(p),p.forEach(A)}else f.fragment&&f.fragment.c();e.intro&&j(t.$$.fragment),V(t,e.target,e.anchor,e.customElement),Fe()}se(i)}class x{$destroy(){Y(this,1),this.$destroy=B}$on(e,n){if(!we(n))return B;const s=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return s.push(n),()=>{const r=s.indexOf(n);r!==-1&&s.splice(r,1)}}$set(e){this.$$set&&!Ge(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const st="/timecard/assets/icon.110bac24.png";function Be(t){const e=t.getUTCHours().toString().padStart(2,"0"),n=t.getUTCMinutes().toString().padStart(2,"0"),s=t.getUTCSeconds().toString().padStart(2,"0");return`${e}:${n}:${s}`}function Ne(t){if(!t||(t=t.trim(),t.length===0))return;const e=t.split(":");if(e.length!==3||e.some(s=>s.length===0))return;const n=new Date(`1970-01-01 ${t}`);if(!isNaN(n.valueOf()))return n}class rt{constructor(){I(this,"tests",[])}get score(){let e=0;for(let n of this.tests)e+=n.score;return e}get scoreString(){return Be(new Date(this.score*1e3))}}class he{constructor(){I(this,"enter");I(this,"exit")}static fromTimes(e,n){const s=Ne(e),r=Ne(n);if(!s||!r||r<s)return;const o=new he;return o.enter=s,o.exit=r,o}get score(){return(this.exit.valueOf()-this.enter.valueOf())/1e3}get scoreString(){return Be(new Date(this.exit.valueOf()-this.enter.valueOf()))}}function it(t){let e,n,s=t[1]+1+"",r,o,l,u,i,f,m,p,k,b,N,P,S,w;return{c(){e=d("tr"),n=d("td"),r=Q(s),o=D(),l=d("button"),l.textContent="\u274C",u=D(),i=d("td"),f=d("input"),m=D(),p=d("td"),k=d("input"),b=D(),N=d("td"),P=Q(t[2]),a(n,"class","svelte-1nqtemt"),a(f,"placeholder","hh:mm:ss"),a(f,"size","8"),a(f,"class","enterTime"),a(i,"class","svelte-1nqtemt"),a(k,"placeholder","hh:mm:ss"),a(k,"size","8"),a(k,"class","exitTime"),a(p,"class","svelte-1nqtemt"),a(N,"class","svelte-1nqtemt")},m(h,_){F(h,e,_),c(e,n),c(n,r),c(n,o),c(n,l),c(e,u),c(e,i),c(i,f),le(f,t[0].enter),c(e,m),c(e,p),c(p,k),le(k,t[0].exit),c(e,b),c(e,N),c(N,P),S||(w=[H(l,"click",t[3]),H(f,"input",t[4]),H(k,"input",t[5])],S=!0)},p(h,[_]){_&2&&s!==(s=h[1]+1+"")&&ae(r,s),_&1&&f.value!==h[0].enter&&le(f,h[0].enter),_&1&&k.value!==h[0].exit&&le(k,h[0].exit),_&4&&ae(P,h[2])},i:B,o:B,d(h){h&&A(e),S=!1,$(w)}}}function lt(t,e,n){let s;const r=Ie();function o(){r("delete",{index:u})}let{testDatum:l}=e,{index:u}=e;function i(p){const k=he.fromTimes(p.enter,p.exit);return k?k.scoreString:""}function f(){l.enter=this.value,n(0,l)}function m(){l.exit=this.value,n(0,l)}return t.$$set=p=>{"testDatum"in p&&n(0,l=p.testDatum),"index"in p&&n(1,u=p.index)},t.$$.update=()=>{t.$$.dirty&1&&n(2,s=i(l))},[l,u,s,o,f,m]}class ut extends x{constructor(e){super(),Z(this,e,lt,it,X,{testDatum:0,index:1})}}function Ke(t,e,n){const s=t.slice();return s[7]=e[n],s[8]=e,s[9]=n,s}function Me(t){let e,n,s;function r(l){t[5](l,t[7],t[8],t[9])}let o={index:t[9]};return t[7]!==void 0&&(o.testDatum=t[7]),e=new ut({props:o}),fe.push(()=>$e(e,"testDatum",r)),e.$on("delete",t[4]),{c(){G(e.$$.fragment)},m(l,u){V(e,l,u),s=!0},p(l,u){t=l;const i={};!n&&u&1&&(n=!0,i.testDatum=t[7],He(()=>n=!1)),e.$set(i)},i(l){s||(j(e.$$.fragment,l),s=!0)},o(l){L(e.$$.fragment,l),s=!1},d(l){Y(e,l)}}}function ot(t){let e,n,s,r,o,l,u,i,f,m,p,k,b,N,P,S,w,h,_,v=t[0],y=[];for(let E=0;E<v.length;E+=1)y[E]=Me(Ke(t,v,E));const R=E=>L(y[E],1,1,()=>{y[E]=null});return{c(){e=d("table"),n=d("thead"),n.innerHTML=`<tr><th class="svelte-1670vm0">Test #</th> 
            <th class="svelte-1670vm0">Time In</th> 
            <th class="svelte-1670vm0">Time Out</th> 
            <th class="svelte-1670vm0">Score</th></tr>`,s=D(),r=d("tbody");for(let E=0;E<y.length;E+=1)y[E].c();o=D(),l=d("tfoot"),u=d("tr"),i=d("th"),f=d("div"),m=Q("Total Score: "),p=d("span"),k=Q(t[1]),b=D(),N=d("button"),N.textContent="Add a Test",P=D(),S=d("button"),S.textContent="Reset",a(p,"class","score"),a(f,"id","overallScore"),a(N,"id","addTest"),a(S,"id","reset"),a(i,"colspan","4"),a(i,"class","svelte-1670vm0"),a(l,"class","svelte-1670vm0"),a(e,"class","svelte-1670vm0")},m(E,T){F(E,e,T),c(e,n),c(e,s),c(e,r);for(let q=0;q<y.length;q+=1)y[q].m(r,null);c(e,o),c(e,l),c(l,u),c(u,i),c(i,f),c(f,m),c(f,p),c(p,k),c(i,b),c(i,N),c(i,P),c(i,S),w=!0,h||(_=[H(N,"click",t[2]),H(S,"click",t[3])],h=!0)},p(E,[T]){if(T&17){v=E[0];let q;for(q=0;q<v.length;q+=1){const g=Ke(E,v,q);y[q]?(y[q].p(g,T),j(y[q],1)):(y[q]=Me(g),y[q].c(),j(y[q],1),y[q].m(r,null))}for(de(),q=v.length;q<y.length;q+=1)R(q);me()}(!w||T&2)&&ae(k,E[1])},i(E){if(!w){for(let T=0;T<v.length;T+=1)j(y[T]);w=!0}},o(E){y=y.filter(Boolean);for(let T=0;T<y.length;T+=1)L(y[T]);w=!1},d(E){E&&A(e),Re(y,E),h=!1,$(_)}}}function je(t){const e=[];for(let n=0;n<t;n++)e.push({enter:"",exit:""});return e}function ct(t,e,n){let s,r=je(7);function o(){n(0,r[r.length]={enter:"",exit:""},r)}function l(){window.confirm("Are you sure you want to reset the Sprint Enduro?")&&n(0,r=je(7))}function u(){let m=new rt;for(let p of r){const k=he.fromTimes(p.enter,p.exit);k&&m.tests.push(k)}return m.scoreString}function i(m){window.confirm(`You sure you want to delete test ${m.detail.index+1}?`)&&n(0,r=r.filter((p,k)=>k!==m.detail.index))}function f(m,p,k,b){k[b]=m,n(0,r)}return t.$$.update=()=>{t.$$.dirty&1&&n(1,s=u())},[r,s,o,l,i,f]}class at extends x{constructor(e){super(),Z(this,e,ct,ot,X,{})}}var O=(t=>(t[t.Start=0]="Start",t[t.Known=1]="Known",t[t.Secret=2]="Secret",t[t.Emergency=3]="Emergency",t))(O||{});class ke{constructor(e){I(this,"type",0);I(this,"minute",0);I(this,"seconds",0);this.minute=e}points(e){let n=0;return this.minute>=e&&(n=this.minute-e),n}disqualified(e){return!1}}class Ue extends ke{constructor(n){super(n);I(this,"type",1)}disqualified(n){return n-this.minute>15}}class Se{constructor(e){I(this,"type",2);I(this,"minute",0);I(this,"seconds",0);this.minute=e}points(e){let n=0;return this.minute>=e?n=this.minute-e:n=5*(e-this.minute)-3,n}disqualified(e){return!1}}class Ee extends Se{constructor(n,s){super(n);I(this,"type",3);this.seconds=s}emergencyPoints(n){return this.minute===n?Math.abs(this.seconds-30):this.minute>n?30+this.seconds+60*(this.minute-n-1):30+(60-this.seconds)+60*(n-this.minute-1)}}class ft{constructor(e){I(this,"riderMinute",1);I(this,"checkpoints",[]);console.assert(e>=1),this.riderMinute=e}get points(){return this.checkpoints.map(e=>e.points(this.riderMinute)).reduce((e,n)=>e+n,0)}get emergencyPoints(){return this.checkpoints.map(e=>e instanceof Ee?e.emergencyPoints(this.riderMinute):0).reduce((e,n)=>e+n,0)}get disqualified(){return this.checkpoints.some(e=>e.disqualified(this.riderMinute))}}function dt(t){let e,n,s,r,o,l=[{class:n=t[3]+" "+t[5].class},{pattern:s=t[0].numeric?"[0-9]*":null},{type:"number"},t[0],{value:t[1]}],u={};for(let i=0;i<l.length;i+=1)u=ge(u,l[i]);return{c(){e=d("input"),De(e,u),te(e,"svelte-8hu0a",!0)},m(i,f){F(i,e,f),e.autofocus&&e.focus(),r||(o=[H(e,"input",t[4]),We(t[2].call(null,e))],r=!0)},p(i,[f]){De(e,u=tt(l,[f&40&&n!==(n=i[3]+" "+i[5].class)&&{class:n},f&1&&s!==(s=i[0].numeric?"[0-9]*":null)&&{pattern:s},{type:"number"},f&1&&i[0],f&2&&e.value!==i[1]&&{value:i[1]}])),te(e,"svelte-8hu0a",!0)},i:B,o:B,d(i){i&&A(e),r=!1,$(o)}}}function mt(t,e,n){let s,{attrs:r}=e,{value:o}=e,{initRow:l=()=>{}}=e;const u=Ie();function i(m){u("value",{value:m.target.value})}function f(m){const p=parseInt(m);return!(isNaN(p)||r.min!==void 0&&p<r.min||r.max!==void 0&&p>r.max)}return t.$$set=m=>{n(5,e=ge(ge({},e),Pe(m))),"attrs"in m&&n(0,r=m.attrs),"value"in m&&n(1,o=m.value),"initRow"in m&&n(2,l=m.initRow)},t.$$.update=()=>{t.$$.dirty&2&&n(3,s=f(o)?"":"error")},e=Pe(e),[r,o,l,s,i,e]}class Te extends x{constructor(e){super(),Z(this,e,mt,dt,X,{attrs:0,value:1,initRow:2})}}function Oe(t){let e,n;return e=new Te({props:{value:t[0].seconds,class:t[2],attrs:{size:"2",style:"width:2em",min:"0",max:"59",defaultValue:"30",numeric:!0}}}),e.$on("value",t[9]),{c(){G(e.$$.fragment)},m(s,r){V(e,s,r),n=!0},p(s,r){const o={};r&1&&(o.value=s[0].seconds),r&4&&(o.class=s[2]),e.$set(o)},i(s){n||(j(e.$$.fragment,s),n=!0)},o(s){L(e.$$.fragment,s),n=!1},d(s){Y(e,s)}}}function ht(t){let e,n,s,r,o,l,u=t[1]+1+"",i,f,m,p,k,b,N,P,S,w,h,_,v,y,R,E,T,q,g,K,U;p=new Te({props:{initRow:pt,value:t[0].minute,class:t[2],attrs:{size:"3",style:"width:2em"}}}),p.$on("value",t[8]);let M=t[0].type===O.Emergency&&Oe(t);return{c(){e=d("tr"),n=d("td"),s=d("img"),o=D(),l=d("td"),i=Q(u),f=D(),m=d("td"),G(p.$$.fragment),k=D(),b=d("td"),M&&M.c(),N=D(),P=d("td"),S=d("input"),h=D(),_=d("td"),v=d("input"),R=D(),E=d("td"),T=d("input"),Ce(s.src,r=t[3])||a(s,"src",r),a(s,"alt","Flag"),a(s,"class","svelte-1ym5x0u"),a(n,"class","svelte-1ym5x0u"),a(l,"class","svelte-1ym5x0u"),a(m,"class","svelte-1ym5x0u"),a(b,"class","svelte-1ym5x0u"),a(S,"class",w=ee(t[2])+" svelte-1ym5x0u"),S.disabled=!0,S.value=t[5],a(S,"size","3"),W(S,"width","2em"),a(P,"class","svelte-1ym5x0u"),a(v,"class",y=ee(t[2])+" svelte-1ym5x0u"),v.disabled=!0,v.value=t[4],a(v,"size","4"),W(v,"width","3em"),a(_,"class","svelte-1ym5x0u"),a(T,"type","checkbox"),a(T,"class","svelte-1ym5x0u"),a(E,"class","svelte-1ym5x0u"),a(e,"class",q=ee(t[2])+" svelte-1ym5x0u")},m(C,z){F(C,e,z),c(e,n),c(n,s),c(e,o),c(e,l),c(l,i),c(e,f),c(e,m),V(p,m,null),c(e,k),c(e,b),M&&M.m(b,null),c(e,N),c(e,P),c(P,S),c(e,h),c(e,_),c(_,v),c(e,R),c(e,E),c(E,T),T.checked=t[0].drop,g=!0,K||(U=[H(s,"click",t[6]),H(s,"keydown",_t),H(T,"change",t[10])],K=!0)},p(C,[z]){(!g||z&8&&!Ce(s.src,r=C[3]))&&a(s,"src",r),(!g||z&2)&&u!==(u=C[1]+1+"")&&ae(i,u);const pe={};z&1&&(pe.value=C[0].minute),z&4&&(pe.class=C[2]),p.$set(pe),C[0].type===O.Emergency?M?(M.p(C,z),z&1&&j(M,1)):(M=Oe(C),M.c(),j(M,1),M.m(b,null)):M&&(de(),L(M,1,1,()=>{M=null}),me()),(!g||z&4&&w!==(w=ee(C[2])+" svelte-1ym5x0u"))&&a(S,"class",w),(!g||z&32&&S.value!==C[5])&&(S.value=C[5]),(!g||z&4&&y!==(y=ee(C[2])+" svelte-1ym5x0u"))&&a(v,"class",y),(!g||z&16&&v.value!==C[4])&&(v.value=C[4]),z&1&&(T.checked=C[0].drop),(!g||z&4&&q!==(q=ee(C[2])+" svelte-1ym5x0u"))&&a(e,"class",q)},i(C){g||(j(p.$$.fragment,C),j(M),g=!0)},o(C){L(p.$$.fragment,C),L(M),g=!1},d(C){C&&A(e),Y(p),M&&M.d(),K=!1,$(U)}}}function pt(t){t.focus()}const _t=()=>{};function gt(t,e,n){let s,r,o,l,{check:u}=e,{index:i}=e,{riderMinute:f}=e;function m(h){const _=parseInt(h.minute);if(isNaN(_))return null;switch(h.type){case O.Emergency:const v=parseInt(h.seconds);if(!isNaN(v))return new Ee(_,v);break;case O.Known:return new Ue(_);case O.Secret:return new Se(_);case O.Start:return new ke(_)}return null}function p(h,_){const v=m(h);return v?v.points(_):0}function k(h,_){const v=m(h);return v&&v.type===O.Emergency?v.emergencyPoints(_):0}function b(h){return{[O.Start]:"./images/start.gif",[O.Known]:"./images/known.gif",[O.Secret]:"./images/secret.gif",[O.Emergency]:"./images/emergency.gif"}[h.type]}function N(){n(0,u.type=(u.type+1)%4,u)}const P=h=>{n(0,u.minute=h.detail.value,u)},S=h=>{n(0,u.seconds=h.detail.value,u)};function w(){u.drop=this.checked,n(0,u)}return t.$$set=h=>{"check"in h&&n(0,u=h.check),"index"in h&&n(1,i=h.index),"riderMinute"in h&&n(7,f=h.riderMinute)},t.$$.update=()=>{t.$$.dirty&129&&n(5,s=p(u,f)),t.$$.dirty&129&&n(4,r=k(u,f)),t.$$.dirty&1&&n(3,o=b(u)),t.$$.dirty&1&&n(2,l=u.drop?"dropped":"")},[u,i,l,o,r,s,N,f,P,S,w]}class vt extends x{constructor(e){super(),Z(this,e,gt,ht,X,{check:0,index:1,riderMinute:7})}}function yt(t){let e,n,s,r,o,l,u,i,f,m,p,k,b,N,P,S;return{c(){e=d("table"),n=d("tbody"),s=d("tr"),s.innerHTML=`<th class="svelte-l64quj">Checks</th> 
            <th class="svelte-l64quj">Points</th> 
            <th class="svelte-l64quj">Emergency<br/>Points</th> 
            <th class="svelte-l64quj">Disqualified</th>`,r=D(),o=d("tr"),l=d("td"),u=d("input"),i=D(),f=d("td"),m=d("input"),p=D(),k=d("td"),b=d("input"),N=D(),P=d("td"),S=d("input"),a(u,"id","checks"),u.disabled=!0,u.value=t[0],a(u,"size","2"),W(u,"width","2em"),a(u,"class","svelte-l64quj"),a(l,"class","svelte-l64quj"),a(m,"id","points"),m.disabled=!0,m.value=t[1],a(m,"size","4"),W(m,"width","3em"),a(m,"class","svelte-l64quj"),a(f,"class","svelte-l64quj"),a(b,"id","emergencyPoints"),b.disabled=!0,b.value=t[2],a(b,"size","4"),W(b,"width","3em"),a(b,"class","svelte-l64quj"),a(k,"class","svelte-l64quj"),a(S,"id","disqualified"),S.disabled=!0,S.value=t[3],a(S,"size","4"),W(S,"width","3em"),a(S,"class","svelte-l64quj"),a(P,"class","svelte-l64quj"),W(e,"margin","auto")},m(w,h){F(w,e,h),c(e,n),c(n,s),c(n,r),c(n,o),c(o,l),c(l,u),c(o,i),c(o,f),c(f,m),c(o,p),c(o,k),c(k,b),c(o,N),c(o,P),c(P,S)},p(w,[h]){h&1&&u.value!==w[0]&&(u.value=w[0]),h&2&&m.value!==w[1]&&(m.value=w[1]),h&4&&b.value!==w[2]&&(b.value=w[2]),h&8&&S.value!==w[3]&&(S.value=w[3])},i:B,o:B,d(w){w&&A(e)}}}function bt(t,e,n){let{totalChecks:s}=e,{points:r}=e,{emergencyPoints:o}=e,{disqualified:l}=e;return t.$$set=u=>{"totalChecks"in u&&n(0,s=u.totalChecks),"points"in u&&n(1,r=u.points),"emergencyPoints"in u&&n(2,o=u.emergencyPoints),"disqualified"in u&&n(3,l=u.disqualified)},[s,r,o,l]}class wt extends x{constructor(e){super(),Z(this,e,bt,yt,X,{totalChecks:0,points:1,emergencyPoints:2,disqualified:3})}}function Ae(t,e,n){const s=t.slice();return s[16]=e[n],s[17]=e,s[18]=n,s}function ze(t){let e,n,s;function r(l){t[9](l,t[16],t[17],t[18])}let o={riderMinute:t[0],index:t[18]};return t[16]!==void 0&&(o.check=t[16]),e=new vt({props:o}),fe.push(()=>$e(e,"check",r)),{c(){G(e.$$.fragment)},m(l,u){V(e,l,u),s=!0},p(l,u){t=l;const i={};u&1&&(i.riderMinute=t[0]),!n&&u&2&&(n=!0,i.check=t[16],He(()=>n=!1)),e.$set(i)},i(l){s||(j(e.$$.fragment,l),s=!0)},o(l){L(e.$$.fragment,l),s=!1},d(l){Y(e,l)}}}function kt(t){let e,n,s,r,o,l,u,i,f,m,p,k,b,N,P,S,w,h,_,v,y,R;s=new Te({props:{value:t[0],attrs:{size:"3",min:"1",style:"width:3em",numeric:!0}}}),s.$on("value",t[8]);let E=t[1],T=[];for(let g=0;g<E.length;g+=1)T[g]=ze(Ae(t,E,g));const q=g=>L(T[g],1,1,()=>{T[g]=null});return b=new wt({props:{totalChecks:t[3],points:t[5],emergencyPoints:t[4],disqualified:t[2]}}),{c(){e=d("div"),n=Q("Rider Minute: "),G(s.$$.fragment),r=D(),o=d("table"),l=d("thead"),l.innerHTML=`<tr><th class="svelte-1976845"></th> 
            <th class="svelte-1976845">#</th> 
            <th class="svelte-1976845">Minute</th> 
            <th class="svelte-1976845">Second</th> 
            <th class="svelte-1976845">Points</th> 
            <th class="svelte-1976845">Emergency<br/>Points</th> 
            <th class="svelte-1976845">Drop</th></tr>`,u=D(),i=d("tbody");for(let g=0;g<T.length;g+=1)T[g].c();f=D(),m=d("tfoot"),p=d("tr"),k=d("td"),G(b.$$.fragment),N=D(),P=d("tr"),S=d("th"),w=d("button"),w.textContent="Add a Check",h=D(),_=d("button"),_.textContent="Reset",a(e,"id","riderMinute"),a(e,"class","svelte-1976845"),a(k,"colspan","7"),a(w,"id","addCheck"),a(_,"id","reset"),a(S,"colspan","7"),a(S,"class","svelte-1976845"),a(m,"class","svelte-1976845"),a(o,"class","svelte-1976845")},m(g,K){F(g,e,K),c(e,n),V(s,e,null),F(g,r,K),F(g,o,K),c(o,l),c(o,u),c(o,i);for(let U=0;U<T.length;U+=1)T[U].m(i,null);c(o,f),c(o,m),c(m,p),c(p,k),V(b,k,null),c(m,N),c(m,P),c(P,S),c(S,w),c(S,h),c(S,_),v=!0,y||(R=[H(w,"click",t[6]),H(_,"click",t[7])],y=!0)},p(g,[K]){const U={};if(K&1&&(U.value=g[0]),s.$set(U),K&3){E=g[1];let C;for(C=0;C<E.length;C+=1){const z=Ae(g,E,C);T[C]?(T[C].p(z,K),j(T[C],1)):(T[C]=ze(z),T[C].c(),j(T[C],1),T[C].m(i,null))}for(de(),C=E.length;C<T.length;C+=1)q(C);me()}const M={};K&8&&(M.totalChecks=g[3]),K&32&&(M.points=g[5]),K&16&&(M.emergencyPoints=g[4]),K&4&&(M.disqualified=g[2]),b.$set(M)},i(g){if(!v){j(s.$$.fragment,g);for(let K=0;K<E.length;K+=1)j(T[K]);j(b.$$.fragment,g),v=!0}},o(g){L(s.$$.fragment,g),T=T.filter(Boolean);for(let K=0;K<T.length;K+=1)L(T[K]);L(b.$$.fragment,g),v=!1},d(g){g&&A(e),Y(s),g&&A(r),g&&A(o),Re(T,g),Y(b),y=!1,$(R)}}}function St(t){return t.length-t.filter(e=>e.drop).length}function Et(t,e,n){let s,r,o,l,u=1,i=f(1);function f(_){const v=[];for(let y=0;y<_;y++)v.push({type:O.Secret,minute:u,seconds:30,drop:!1});return v}function m(){console.log(u),n(1,i[i.length]={type:O.Secret,minute:u,seconds:30,drop:!1},i)}function p(){window.confirm("Are you sure you want to reset the score card?")&&(n(0,u=1),n(1,i=f(1)))}function k(_){const v=parseInt(_.minute);if(isNaN(v))return null;switch(_.type){case O.Emergency:const y=parseInt(_.seconds);if(!isNaN(y))return new Ee(v,y);break;case O.Known:return new Ue(v);case O.Secret:return new Se(v);case O.Start:return new ke(v)}return null}function b(_,v){if(_<1)return null;const y=new ft(_);for(let R of v){const E=k(R);!R.drop&&E&&y.checkpoints.push(E)}return y}function N(_,v){const y=b(_,v);return y?y.points:"0"}function P(_,v){const y=b(_,v);return y?y.emergencyPoints:"0"}function S(_,v){const y=b(_,v);return y&&y.disqualified?"YES":"NO"}const w=_=>{n(0,u=_.detail.value)};function h(_,v,y,R){y[R]=_,n(1,i)}return t.$$.update=()=>{t.$$.dirty&3&&n(5,s=N(u,i)),t.$$.dirty&3&&n(4,r=P(u,i)),t.$$.dirty&2&&n(3,o=St(i)),t.$$.dirty&3&&n(2,l=S(u,i))},[u,i,l,o,r,s,m,p,w,h]}class Tt extends x{constructor(e){super(),Z(this,e,Et,kt,X,{})}}function qt(t){let e,n,s,r,o,l,u;return l=new Tt({}),{c(){e=d("div"),n=d("h2"),n.textContent="Time Keeper Enduro",s=D(),r=d("p"),r.textContent="Tap Flags to change check type.",o=D(),G(l.$$.fragment),a(e,"id","timeKeeper")},m(i,f){F(i,e,f),c(e,n),c(e,s),c(e,r),c(e,o),V(l,e,null),u=!0},i(i){u||(j(l.$$.fragment,i),u=!0)},o(i){L(l.$$.fragment,i),u=!1},d(i){i&&A(e),Y(l)}}}function Ct(t){let e,n,s,r,o,l,u;return l=new at({}),{c(){e=d("div"),n=d("h2"),n.textContent="Sprint Enduro",s=D(),r=d("p"),r.innerHTML="Enter <b>Time In</b> and <b>Time Out</b> as HH:MM:SS.",o=D(),G(l.$$.fragment),a(e,"id","sprint")},m(i,f){F(i,e,f),c(e,n),c(e,s),c(e,r),c(e,o),V(l,e,null),u=!0},i(i){u||(j(l.$$.fragment,i),u=!0)},o(i){L(l.$$.fragment,i),u=!1},d(i){i&&A(e),Y(l)}}}function Pt(t){let e,n,s,r,o,l,u,i,f,m,p,k,b,N,P,S,w,h,_,v,y;const R=[Ct,qt],E=[];function T(q,g){return q[0]==="sprint"?0:1}return w=T(t),h=E[w]=R[w](t),{c(){e=d("meta"),n=d("meta"),s=d("link"),r=d("meta"),o=d("link"),l=D(),u=d("main"),i=d("center"),f=d("h1"),f.textContent="Enduro Time Card",m=D(),p=d("p"),p.textContent=`You can verify your Enduro score cards using this tool. Why would
      you do that?  Because races are busy places and with hundreds of riders,
      those hard working club members sometimes enter something incorrectly.`,k=D(),b=d("button"),b.textContent="Sprint",N=D(),P=d("button"),P.textContent="Time Keeper",S=D(),h.c(),a(e,"name","apple-mobile-web-app-capable"),a(e,"content","yes"),a(n,"name","viewport"),a(n,"content","width=device-width, initial-scale=1, maximum-scale=1"),a(s,"rel","apple-touch-icon"),a(s,"href",st),a(r,"name","apple-mobile-web-app-title"),a(r,"content","Enduro Time Card"),a(o,"red","manifest"),a(o,"crossorigin","use-credentials"),a(o,"href","manifest.json"),a(b,"class","svelte-py93mz"),te(b,"selected",t[0]==="sprint"),a(P,"class","svelte-py93mz"),te(P,"selected",t[0]==="timeKeeper")},m(q,g){c(document.head,e),c(document.head,n),c(document.head,s),c(document.head,r),c(document.head,o),F(q,l,g),F(q,u,g),c(u,i),c(i,f),c(i,m),c(i,p),c(i,k),c(i,b),c(i,N),c(i,P),c(i,S),E[w].m(i,null),_=!0,v||(y=[H(b,"click",t[2]),H(P,"click",t[3])],v=!0)},p(q,[g]){(!_||g&1)&&te(b,"selected",q[0]==="sprint"),(!_||g&1)&&te(P,"selected",q[0]==="timeKeeper");let K=w;w=T(q),w!==K&&(de(),L(E[K],1,1,()=>{E[K]=null}),me(),h=E[w],h||(h=E[w]=R[w](q),h.c()),j(h,1),h.m(i,null))},i(q){_||(j(h),_=!0)},o(q){L(h),_=!1},d(q){A(e),A(n),A(s),A(r),A(o),q&&A(l),q&&A(u),E[w].d(),v=!1,$(y)}}}function Dt(t,e,n){let s="sprint";function r(u){s!==u&&window.confirm("Switching time cards will lose all data. Are you sure?")&&n(0,s=u)}return[s,r,()=>r("sprint"),()=>r("timeKeeper")]}class Nt extends x{constructor(e){super(),Z(this,e,Dt,Pt,X,{})}}new Nt({target:document.getElementById("app")});
