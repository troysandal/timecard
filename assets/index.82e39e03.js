var Ye=Object.defineProperty;var Ge=(t,e,n)=>e in t?Ye(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var R=(t,e,n)=>(Ge(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerpolicy&&(i.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?i.credentials="include":r.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function B(){}function Ie(t){return t()}function Ee(){return Object.create(null)}function Y(t){t.forEach(Ie)}function _e(t){return typeof t=="function"}function X(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let ue;function Te(t,e){return ue||(ue=document.createElement("a")),ue.href=e,t===ue.href}function We(t){return Object.keys(t).length===0}function V(t){return t==null?"":t}function Je(t){return t&&_e(t.destroy)?t.destroy:B}function c(t,e){t.appendChild(e)}function L(t,e,n){t.insertBefore(e,n||null)}function $(t){t.parentNode&&t.parentNode.removeChild(t)}function de(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function h(t){return document.createElement(t)}function W(t){return document.createTextNode(t)}function q(){return W(" ")}function Re(){return W("")}function I(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function a(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function me(t){return t===""?null:+t}function Qe(t){return Array.from(t.childNodes)}function le(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function U(t,e){t.value=e==null?"":e}function G(t,e,n,s){n===null?t.style.removeProperty(e):t.style.setProperty(e,n,s?"important":"")}function Xe(t,e,{bubbles:n=!1,cancelable:s=!1}={}){const r=document.createEvent("CustomEvent");return r.initCustomEvent(t,n,s,e),r}function je(t,e){return new t(e)}let re;function se(t){re=t}function Ze(){if(!re)throw new Error("Function called outside component initialization");return re}function xe(){const t=Ze();return(e,n,{cancelable:s=!1}={})=>{const r=t.$$.callbacks[e];if(r){const i=Xe(e,n,{cancelable:s});return r.slice().forEach(l=>{l.call(t,i)}),!i.defaultPrevented}return!0}}const ne=[],he=[],ae=[],we=[],et=Promise.resolve();let ye=!1;function tt(){ye||(ye=!0,et.then(Be))}function be(t){ae.push(t)}function He(t){we.push(t)}const ve=new Set;let ce=0;function Be(){const t=re;do{for(;ce<ne.length;){const e=ne[ce];ce++,se(e),nt(e.$$)}for(se(null),ne.length=0,ce=0;he.length;)he.pop()();for(let e=0;e<ae.length;e+=1){const n=ae[e];ve.has(n)||(ve.add(n),n())}ae.length=0}while(ne.length);for(;we.length;)we.pop()();ye=!1,ve.clear(),se(t)}function nt(t){if(t.fragment!==null){t.update(),Y(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(be)}}const fe=new Set;let te;function ie(){te={r:0,c:[],p:te}}function oe(){te.r||Y(te.c),te=te.p}function M(t,e){t&&t.i&&(fe.delete(t),t.i(e))}function z(t,e,n,s){if(t&&t.o){if(fe.has(t))return;fe.add(t),te.c.push(()=>{fe.delete(t),s&&(n&&t.d(1),s())}),t.o(e)}else s&&s()}function Fe(t,e,n){const s=t.$$.props[e];s!==void 0&&(t.$$.bound[s]=n,n(t.$$.ctx[s]))}function ee(t){t&&t.c()}function J(t,e,n,s){const{fragment:r,after_update:i}=t.$$;r&&r.m(e,n),s||be(()=>{const l=t.$$.on_mount.map(Ie).filter(_e);t.$$.on_destroy?t.$$.on_destroy.push(...l):Y(l),t.$$.on_mount=[]}),i.forEach(be)}function Q(t,e){const n=t.$$;n.fragment!==null&&(Y(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function st(t,e){t.$$.dirty[0]===-1&&(ne.push(t),tt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Z(t,e,n,s,r,i,l,o=[-1]){const u=re;se(t);const p=t.$$={fragment:null,ctx:[],props:i,update:B,not_equal:r,bound:Ee(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:Ee(),dirty:o,skip_bound:!1,root:e.target||u.$$.root};l&&l(p.root);let f=!1;if(p.ctx=n?n(t,e.props||{},(m,d,...g)=>{const j=g.length?g[0]:d;return p.ctx&&r(p.ctx[m],p.ctx[m]=j)&&(!p.skip_bound&&p.bound[m]&&p.bound[m](j),f&&st(t,m)),d}):[],p.update(),f=!0,Y(p.before_update),p.fragment=s?s(p.ctx):!1,e.target){if(e.hydrate){const m=Qe(e.target);p.fragment&&p.fragment.l(m),m.forEach($)}else p.fragment&&p.fragment.c();e.intro&&M(t.$$.fragment),J(t,e.target,e.anchor,e.customElement),Be()}se(u)}class x{$destroy(){Q(this,1),this.$destroy=B}$on(e,n){if(!_e(n))return B;const s=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return s.push(n),()=>{const r=s.indexOf(n);r!==-1&&s.splice(r,1)}}$set(e){this.$$set&&!We(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const lt="/timecard/assets/icon.110bac24.png";function Ve(t){const e=t.getUTCHours().toString().padStart(2,"0"),n=t.getUTCMinutes().toString().padStart(2,"0"),s=t.getUTCSeconds().toString().padStart(2,"0");return`${e}:${n}:${s}`}function qe(t){if(!t||(t=t.trim(),t.length===0))return;const e=t.split(":");if(e.length!==3||e.some(s=>s.length===0))return;const n=new Date(`1970-01-01 ${t}`);if(!isNaN(n.valueOf()))return n}class rt{constructor(){R(this,"tests",[])}get score(){let e=0;for(let n of this.tests)e+=n.score;return e}get scoreString(){return Ve(new Date(this.score*1e3))}}class ge{constructor(){R(this,"enter");R(this,"exit")}static fromTimes(e,n){const s=qe(e),r=qe(n);if(!s||!r||r<s)return;const i=new ge;return i.enter=s,i.exit=r,i}get score(){return(this.exit.valueOf()-this.enter.valueOf())/1e3}get scoreString(){return Ve(new Date(this.exit.valueOf()-this.enter.valueOf()))}}function it(t){let e,n,s=t[1]+1+"",r,i,l,o,u,p,f,m,d,g,j,C,S,b;return{c(){e=h("tr"),n=h("td"),r=W(s),i=q(),l=h("button"),l.textContent="\u274C",o=q(),u=h("td"),p=h("input"),f=q(),m=h("td"),d=h("input"),g=q(),j=h("td"),C=W(t[2]),a(n,"class","svelte-1nqtemt"),a(p,"size","8"),a(p,"class","enterTime"),a(u,"class","svelte-1nqtemt"),a(d,"size","8"),a(d,"class","exitTime"),a(m,"class","svelte-1nqtemt"),a(j,"class","svelte-1nqtemt")},m(v,w){L(v,e,w),c(e,n),c(n,r),c(n,i),c(n,l),c(e,o),c(e,u),c(u,p),U(p,t[0].enter),c(e,f),c(e,m),c(m,d),U(d,t[0].exit),c(e,g),c(e,j),c(j,C),S||(b=[I(l,"click",t[3]),I(p,"input",t[4]),I(d,"input",t[5])],S=!0)},p(v,[w]){w&2&&s!==(s=v[1]+1+"")&&le(r,s),w&1&&p.value!==v[0].enter&&U(p,v[0].enter),w&1&&d.value!==v[0].exit&&U(d,v[0].exit),w&4&&le(C,v[2])},i:B,o:B,d(v){v&&$(e),S=!1,Y(b)}}}function ot(t,e,n){let s;const r=xe();function i(){r("delete",{index:o})}let{testDatum:l}=e,{index:o}=e;function u(m){const d=ge.fromTimes(m.enter,m.exit);return d?d.scoreString:""}function p(){l.enter=this.value,n(0,l)}function f(){l.exit=this.value,n(0,l)}return t.$$set=m=>{"testDatum"in m&&n(0,l=m.testDatum),"index"in m&&n(1,o=m.index)},t.$$.update=()=>{t.$$.dirty&1&&n(2,s=u(l))},[l,o,s,i,p,f]}class ut extends x{constructor(e){super(),Z(this,e,ot,it,X,{testDatum:0,index:1})}}function Ce(t,e,n){const s=t.slice();return s[7]=e[n],s[8]=e,s[9]=n,s}function Pe(t){let e,n,s;function r(l){t[5](l,t[7],t[8],t[9])}let i={index:t[9]};return t[7]!==void 0&&(i.testDatum=t[7]),e=new ut({props:i}),he.push(()=>Fe(e,"testDatum",r)),e.$on("delete",t[4]),{c(){ee(e.$$.fragment)},m(l,o){J(e,l,o),s=!0},p(l,o){t=l;const u={};!n&&o&1&&(n=!0,u.testDatum=t[7],He(()=>n=!1)),e.$set(u)},i(l){s||(M(e.$$.fragment,l),s=!0)},o(l){z(e.$$.fragment,l),s=!1},d(l){Q(e,l)}}}function ct(t){let e,n,s,r,i,l,o,u,p,f,m,d,g,j,C,S,b,v,w,y=t[0],_=[];for(let T=0;T<y.length;T+=1)_[T]=Pe(Ce(t,y,T));const O=T=>z(_[T],1,1,()=>{_[T]=null});return{c(){e=h("table"),n=h("thead"),n.innerHTML=`<tr><th class="svelte-1670vm0">Test #</th> 
            <th class="svelte-1670vm0">Time In</th> 
            <th class="svelte-1670vm0">Time Out</th> 
            <th class="svelte-1670vm0">Score</th></tr>`,s=q(),r=h("tbody");for(let T=0;T<_.length;T+=1)_[T].c();i=q(),l=h("tfoot"),o=h("tr"),u=h("th"),p=h("div"),f=W("Total Score: "),m=h("span"),d=W(t[1]),g=q(),j=h("button"),j.textContent="Add a Test",C=q(),S=h("button"),S.textContent="Reset",a(m,"class","score"),a(p,"id","overallScore"),a(j,"id","addTest"),a(S,"id","reset"),a(u,"colspan","4"),a(u,"class","svelte-1670vm0"),a(l,"class","svelte-1670vm0"),a(e,"class","svelte-1670vm0")},m(T,E){L(T,e,E),c(e,n),c(e,s),c(e,r);for(let N=0;N<_.length;N+=1)_[N].m(r,null);c(e,i),c(e,l),c(l,o),c(o,u),c(u,p),c(p,f),c(p,m),c(m,d),c(u,g),c(u,j),c(u,C),c(u,S),b=!0,v||(w=[I(j,"click",t[2]),I(S,"click",t[3])],v=!0)},p(T,[E]){if(E&17){y=T[0];let N;for(N=0;N<y.length;N+=1){const k=Ce(T,y,N);_[N]?(_[N].p(k,E),M(_[N],1)):(_[N]=Pe(k),_[N].c(),M(_[N],1),_[N].m(r,null))}for(ie(),N=y.length;N<_.length;N+=1)O(N);oe()}(!b||E&2)&&le(d,T[1])},i(T){if(!b){for(let E=0;E<y.length;E+=1)M(_[E]);b=!0}},o(T){_=_.filter(Boolean);for(let E=0;E<_.length;E+=1)z(_[E]);b=!1},d(T){T&&$(e),de(_,T),v=!1,Y(w)}}}function Ne(t){const e=[];for(let n=0;n<t;n++)e.push({enter:"",exit:""});return e}function at(t,e,n){let s,r=Ne(7);function i(){n(0,r[r.length]={enter:"",exit:""},r)}function l(){window.confirm("Are you sure you want to reset the Sprint Enduro?")&&n(0,r=Ne(7))}function o(){let f=new rt;for(let m of r){const d=ge.fromTimes(m.enter,m.exit);d&&f.tests.push(d)}return f.scoreString}function u(f){window.confirm(`You sure you want to delete test ${f.detail.index+1}?`)&&n(0,r=r.filter((m,d)=>d!==f.detail.index))}function p(f,m,d,g){d[g]=f,n(0,r)}return t.$$.update=()=>{t.$$.dirty&1&&n(1,s=o())},[r,s,i,l,u,p]}class ft extends x{constructor(e){super(),Z(this,e,at,ct,X,{})}}function $e(t,e,n){const s=t.slice();return s[3]=e[n],s}function De(t,e,n){const s=t.slice();return s[3]=e[n],s}function Ke(t){let e,n,s=t[3].label+"",r,i,l,o,u;return{c(){e=h("li"),n=h("span"),r=W(s),i=q(),a(n,"class","svelte-1vgtwus"),a(e,"class",l=V(t[0]===t[3].value?"active":"")+" svelte-1vgtwus")},m(p,f){L(p,e,f),c(e,n),c(n,r),c(e,i),o||(u=[I(n,"keypress",mt),I(n,"click",function(){_e(t[2](t[3].value))&&t[2](t[3].value).apply(this,arguments)})],o=!0)},p(p,f){t=p,f&2&&s!==(s=t[3].label+"")&&le(r,s),f&3&&l!==(l=V(t[0]===t[3].value?"active":"")+" svelte-1vgtwus")&&a(e,"class",l)},d(p){p&&$(e),o=!1,Y(u)}}}function Me(t){let e,n,s,r;var i=t[3].component;function l(o){return{}}return i&&(n=je(i,l())),{c(){e=h("div"),n&&ee(n.$$.fragment),s=q(),a(e,"class","box svelte-1vgtwus")},m(o,u){L(o,e,u),n&&J(n,e,null),c(e,s),r=!0},p(o,u){if(i!==(i=o[3].component)){if(n){ie();const p=n;z(p.$$.fragment,1,0,()=>{Q(p,1)}),oe()}i?(n=je(i,l()),ee(n.$$.fragment),M(n.$$.fragment,1),J(n,e,s)):n=null}},i(o){r||(n&&M(n.$$.fragment,o),r=!0)},o(o){n&&z(n.$$.fragment,o),r=!1},d(o){o&&$(e),n&&Q(n)}}}function Oe(t){let e,n,s=t[0]==t[3].value&&Me(t);return{c(){s&&s.c(),e=Re()},m(r,i){s&&s.m(r,i),L(r,e,i),n=!0},p(r,i){r[0]==r[3].value?s?(s.p(r,i),i&3&&M(s,1)):(s=Me(r),s.c(),M(s,1),s.m(e.parentNode,e)):s&&(ie(),z(s,1,1,()=>{s=null}),oe())},i(r){n||(M(s),n=!0)},o(r){z(s),n=!1},d(r){s&&s.d(r),r&&$(e)}}}function dt(t){let e,n,s,r,i=t[1],l=[];for(let f=0;f<i.length;f+=1)l[f]=Ke(De(t,i,f));let o=t[1],u=[];for(let f=0;f<o.length;f+=1)u[f]=Oe($e(t,o,f));const p=f=>z(u[f],1,1,()=>{u[f]=null});return{c(){e=h("ul");for(let f=0;f<l.length;f+=1)l[f].c();n=q();for(let f=0;f<u.length;f+=1)u[f].c();s=Re(),a(e,"class","svelte-1vgtwus")},m(f,m){L(f,e,m);for(let d=0;d<l.length;d+=1)l[d].m(e,null);L(f,n,m);for(let d=0;d<u.length;d+=1)u[d].m(f,m);L(f,s,m),r=!0},p(f,[m]){if(m&7){i=f[1];let d;for(d=0;d<i.length;d+=1){const g=De(f,i,d);l[d]?l[d].p(g,m):(l[d]=Ke(g),l[d].c(),l[d].m(e,null))}for(;d<l.length;d+=1)l[d].d(1);l.length=i.length}if(m&3){o=f[1];let d;for(d=0;d<o.length;d+=1){const g=$e(f,o,d);u[d]?(u[d].p(g,m),M(u[d],1)):(u[d]=Oe(g),u[d].c(),M(u[d],1),u[d].m(s.parentNode,s))}for(ie(),d=o.length;d<u.length;d+=1)p(d);oe()}},i(f){if(!r){for(let m=0;m<o.length;m+=1)M(u[m]);r=!0}},o(f){u=u.filter(Boolean);for(let m=0;m<u.length;m+=1)z(u[m]);r=!1},d(f){f&&$(e),de(l,f),f&&$(n),de(u,f),f&&$(s)}}}const mt=()=>{};function ht(t,e,n){let{items:s=[]}=e,{activeTabValue:r=1}=e;const i=l=>()=>n(0,r=l);return t.$$set=l=>{"items"in l&&n(1,s=l.items),"activeTabValue"in l&&n(0,r=l.activeTabValue)},[r,s,i]}class pt extends x{constructor(e){super(),Z(this,e,ht,dt,X,{items:1,activeTabValue:0})}}function _t(t){let e,n,s,r,i,l,o;return l=new ft({}),{c(){e=h("div"),n=h("h2"),n.textContent="Sprint Enduro",s=q(),r=h("p"),r.innerHTML="Enter <b>Time In</b> and <b>Time Out</b> as HH:MM:SS.",i=q(),ee(l.$$.fragment),a(e,"id","sprint")},m(u,p){L(u,e,p),c(e,n),c(e,s),c(e,r),c(e,i),J(l,e,null),o=!0},p:B,i(u){o||(M(l.$$.fragment,u),o=!0)},o(u){z(l.$$.fragment,u),o=!1},d(u){u&&$(e),Q(l)}}}class gt extends x{constructor(e){super(),Z(this,e,null,_t,X,{})}}var A=(t=>(t[t.Start=0]="Start",t[t.Known=1]="Known",t[t.Secret=2]="Secret",t[t.Emergency=3]="Emergency",t))(A||{});class ke{constructor(e){R(this,"type",0);R(this,"minute",0);R(this,"seconds",0);this.minute=e}points(e){let n=0;return this.minute>=e&&(n=this.minute-e),n}disqualified(e){return!1}}class Ue extends ke{constructor(n){super(n);R(this,"type",1)}disqualified(n){return n-this.minute>15}}class Se{constructor(e){R(this,"type",2);R(this,"minute",0);R(this,"seconds",0);this.minute=e}points(e){let n=0;return this.minute>=e?n=this.minute-e:n=5*(e-this.minute)-3,n}disqualified(e){return!1}}class pe extends Se{constructor(n,s){super(n);R(this,"type",3);this.seconds=s}emergencyPoints(n){return this.minute===n?Math.abs(this.seconds-30):this.minute>n?30+this.seconds+60*(this.minute-n-1):30+(60-this.seconds)+60*(n-this.minute-1)}}class vt{constructor(e){R(this,"riderMinute",1);R(this,"checkpoints",[]);console.assert(e>=1),this.riderMinute=e}get points(){return this.checkpoints.map(e=>e.points(this.riderMinute)).reduce((e,n)=>e+n,0)}get emergencyPoints(){return this.checkpoints.map(e=>e instanceof pe?e.emergencyPoints(this.riderMinute):0).reduce((e,n)=>e+n,0)}get disqualified(){return this.checkpoints.some(e=>e.disqualified(this.riderMinute))}}function Ae(t){let e,n,s,r;return{c(){e=h("input"),a(e,"class",n=V(t[2])+" svelte-3jwvov"),a(e,"size","2"),G(e,"width","2em"),a(e,"type","number"),a(e,"pattern","[0-9]*"),a(e,"min","0"),a(e,"max","59")},m(i,l){L(i,e,l),U(e,t[0].seconds),s||(r=I(e,"input",t[9]),s=!0)},p(i,l){l&4&&n!==(n=V(i[2])+" svelte-3jwvov")&&a(e,"class",n),l&1&&me(e.value)!==i[0].seconds&&U(e,i[0].seconds)},d(i){i&&$(e),s=!1,r()}}}function wt(t){let e,n,s,r,i,l,o=t[1]+1+"",u,p,f,m,d,g,j,C,S,b,v,w,y,_,O,T,E,N,k,D,F,P=t[0].type===A.Emergency&&Ae(t);return{c(){e=h("tr"),n=h("td"),s=h("img"),i=q(),l=h("td"),u=W(o),p=q(),f=h("td"),m=h("input"),g=q(),j=h("td"),P&&P.c(),C=q(),S=h("td"),b=h("input"),w=q(),y=h("td"),_=h("input"),T=q(),E=h("td"),N=h("input"),Te(s.src,r=t[3])||a(s,"src",r),a(s,"alt","Flag"),a(s,"class","svelte-3jwvov"),a(n,"class","svelte-3jwvov"),a(l,"class","svelte-3jwvov"),a(m,"class",d=V(t[2])+" svelte-3jwvov"),a(m,"size","3"),G(m,"width","2em"),a(m,"type","number"),a(f,"class","svelte-3jwvov"),a(j,"class","svelte-3jwvov"),a(b,"class",v=V(t[2])+" svelte-3jwvov"),b.disabled=!0,b.value=t[5],a(b,"size","3"),G(b,"width","2em"),a(S,"class","svelte-3jwvov"),a(_,"class",O=V(t[2])+" svelte-3jwvov"),_.disabled=!0,_.value=t[4],a(_,"size","4"),G(_,"width","3em"),a(y,"class","svelte-3jwvov"),a(N,"type","checkbox"),a(N,"class","svelte-3jwvov"),a(E,"class","svelte-3jwvov"),a(e,"class",k=V(t[2])+" svelte-3jwvov")},m(K,H){L(K,e,H),c(e,n),c(n,s),c(e,i),c(e,l),c(l,u),c(e,p),c(e,f),c(f,m),U(m,t[0].minute),c(e,g),c(e,j),P&&P.m(j,null),c(e,C),c(e,S),c(S,b),c(e,w),c(e,y),c(y,_),c(e,T),c(e,E),c(E,N),N.checked=t[0].drop,D||(F=[I(s,"click",t[6]),I(s,"keydown",bt),I(m,"input",t[8]),Je(yt.call(null,m)),I(N,"change",t[10])],D=!0)},p(K,[H]){H&8&&!Te(s.src,r=K[3])&&a(s,"src",r),H&2&&o!==(o=K[1]+1+"")&&le(u,o),H&4&&d!==(d=V(K[2])+" svelte-3jwvov")&&a(m,"class",d),H&1&&me(m.value)!==K[0].minute&&U(m,K[0].minute),K[0].type===A.Emergency?P?P.p(K,H):(P=Ae(K),P.c(),P.m(j,null)):P&&(P.d(1),P=null),H&4&&v!==(v=V(K[2])+" svelte-3jwvov")&&a(b,"class",v),H&32&&b.value!==K[5]&&(b.value=K[5]),H&4&&O!==(O=V(K[2])+" svelte-3jwvov")&&a(_,"class",O),H&16&&_.value!==K[4]&&(_.value=K[4]),H&1&&(N.checked=K[0].drop),H&4&&k!==(k=V(K[2])+" svelte-3jwvov")&&a(e,"class",k)},i:B,o:B,d(K){K&&$(e),P&&P.d(),D=!1,Y(F)}}}function yt(t){t.focus()}const bt=()=>{};function kt(t,e,n){let s,r,i,l,{check:o}=e,{index:u}=e,{riderMinute:p}=e;function f(v){const w=parseInt(v.minute);if(isNaN(w))return null;switch(v.type){case A.Emergency:const y=parseInt(v.seconds);if(!isNaN(y))return new pe(w,y);break;case A.Known:return new Ue(w);case A.Secret:return new Se(w);case A.Start:return new ke(w)}return null}function m(v,w){const y=f(v);return y?y.points(w):0}function d(v,w){if(v.type===A.Emergency){const y=parseInt(v.minute),_=parseInt(v.seconds);if(!isNaN(y+_)){console.log(y,_,w);const O=new pe(y,_);return console.log(O),console.log(O.emergencyPoints(w)),O.emergencyPoints(w)}}return""}function g(v){return{[A.Start]:"./images/start.gif",[A.Known]:"./images/known.gif",[A.Secret]:"./images/secret.gif",[A.Emergency]:"./images/emergency.gif"}[v.type]}function j(){n(0,o.type=(o.type+1)%4,o)}function C(){o.minute=me(this.value),n(0,o)}function S(){o.seconds=me(this.value),n(0,o)}function b(){o.drop=this.checked,n(0,o)}return t.$$set=v=>{"check"in v&&n(0,o=v.check),"index"in v&&n(1,u=v.index),"riderMinute"in v&&n(7,p=v.riderMinute)},t.$$.update=()=>{t.$$.dirty&129&&n(5,s=m(o,p)),t.$$.dirty&129&&n(4,r=d(o,p)),t.$$.dirty&1&&n(3,i=g(o)),t.$$.dirty&1&&n(2,l=o.drop?"dropped":"")},[o,u,l,i,r,s,j,p,C,S,b]}class St extends x{constructor(e){super(),Z(this,e,kt,wt,X,{check:0,index:1,riderMinute:7})}}function Et(t){let e,n,s,r,i,l,o,u,p,f,m,d,g,j,C,S;return{c(){e=h("table"),n=h("tbody"),s=h("tr"),s.innerHTML=`<th class="svelte-l64quj">#<br/>Checks</th> 
            <th class="svelte-l64quj">Points</th> 
            <th class="svelte-l64quj">Emergency<br/>Points</th> 
            <th class="svelte-l64quj">Disqualified</th>`,r=q(),i=h("tr"),l=h("td"),o=h("input"),u=q(),p=h("td"),f=h("input"),m=q(),d=h("td"),g=h("input"),j=q(),C=h("td"),S=h("input"),a(o,"id","checks"),o.disabled=!0,o.value=t[0],a(o,"size","2"),G(o,"width","2em"),a(o,"class","svelte-l64quj"),a(l,"class","svelte-l64quj"),a(f,"id","points"),f.disabled=!0,f.value=t[1],a(f,"size","4"),G(f,"width","3em"),a(f,"class","svelte-l64quj"),a(p,"class","svelte-l64quj"),a(g,"id","emergencyPoints"),g.disabled=!0,g.value=t[2],a(g,"size","4"),G(g,"width","3em"),a(g,"class","svelte-l64quj"),a(d,"class","svelte-l64quj"),a(S,"id","disqualified"),S.disabled=!0,S.value=t[3],a(S,"size","4"),G(S,"width","3em"),a(S,"class","svelte-l64quj"),a(C,"class","svelte-l64quj"),G(e,"margin","auto")},m(b,v){L(b,e,v),c(e,n),c(n,s),c(n,r),c(n,i),c(i,l),c(l,o),c(i,u),c(i,p),c(p,f),c(i,m),c(i,d),c(d,g),c(i,j),c(i,C),c(C,S)},p(b,[v]){v&1&&o.value!==b[0]&&(o.value=b[0]),v&2&&f.value!==b[1]&&(f.value=b[1]),v&4&&g.value!==b[2]&&(g.value=b[2]),v&8&&S.value!==b[3]&&(S.value=b[3])},i:B,o:B,d(b){b&&$(e)}}}function Tt(t,e,n){let{totalChecks:s}=e,{points:r}=e,{emergencyPoints:i}=e,{disqualified:l}=e;return t.$$set=o=>{"totalChecks"in o&&n(0,s=o.totalChecks),"points"in o&&n(1,r=o.points),"emergencyPoints"in o&&n(2,i=o.emergencyPoints),"disqualified"in o&&n(3,l=o.disqualified)},[s,r,i,l]}class jt extends x{constructor(e){super(),Z(this,e,Tt,Et,X,{totalChecks:0,points:1,emergencyPoints:2,disqualified:3})}}function Le(t,e,n){const s=t.slice();return s[16]=e[n],s[17]=e,s[18]=n,s}function ze(t){let e,n,s;function r(l){t[9](l,t[16],t[17],t[18])}let i={riderMinute:t[0],index:t[18]};return t[16]!==void 0&&(i.check=t[16]),e=new St({props:i}),he.push(()=>Fe(e,"check",r)),{c(){ee(e.$$.fragment)},m(l,o){J(e,l,o),s=!0},p(l,o){t=l;const u={};o&1&&(u.riderMinute=t[0]),!n&&o&2&&(n=!0,u.check=t[16],He(()=>n=!1)),e.$set(u)},i(l){s||(M(e.$$.fragment,l),s=!0)},o(l){z(e.$$.fragment,l),s=!1},d(l){Q(e,l)}}}function qt(t){let e,n,s,r,i,l,o,u,p,f,m,d,g,j,C,S,b,v,w,y,_,O,T=t[1],E=[];for(let k=0;k<T.length;k+=1)E[k]=ze(Le(t,T,k));const N=k=>z(E[k],1,1,()=>{E[k]=null});return g=new jt({props:{totalChecks:t[3],points:t[5],emergencyPoints:t[4],disqualified:t[2]}}),{c(){e=h("div"),n=W("Rider Minute: "),s=h("input"),r=q(),i=h("table"),l=h("thead"),l.innerHTML=`<tr><th class="svelte-1976845"></th> 
            <th class="svelte-1976845">#</th> 
            <th class="svelte-1976845">Minute</th> 
            <th class="svelte-1976845">Second</th> 
            <th class="svelte-1976845">Points</th> 
            <th class="svelte-1976845">Emergency<br/>Points</th> 
            <th class="svelte-1976845">Drop</th></tr>`,o=q(),u=h("tbody");for(let k=0;k<E.length;k+=1)E[k].c();p=q(),f=h("tfoot"),m=h("tr"),d=h("td"),ee(g.$$.fragment),j=q(),C=h("tr"),S=h("th"),b=h("button"),b.textContent="Add a Check",v=q(),w=h("button"),w.textContent="Reset",a(s,"pattern","[0-9]*"),a(s,"size","3"),a(s,"min","1"),a(e,"id","riderMinute"),a(e,"class","svelte-1976845"),a(d,"colspan","7"),a(b,"id","addCheck"),a(w,"id","reset"),a(S,"colspan","7"),a(S,"class","svelte-1976845"),a(f,"class","svelte-1976845"),a(i,"class","svelte-1976845")},m(k,D){L(k,e,D),c(e,n),c(e,s),U(s,t[0]),L(k,r,D),L(k,i,D),c(i,l),c(i,o),c(i,u);for(let F=0;F<E.length;F+=1)E[F].m(u,null);c(i,p),c(i,f),c(f,m),c(m,d),J(g,d,null),c(f,j),c(f,C),c(C,S),c(S,b),c(S,v),c(S,w),y=!0,_||(O=[I(s,"input",t[8]),I(b,"click",t[6]),I(w,"click",t[7])],_=!0)},p(k,[D]){if(D&1&&s.value!==k[0]&&U(s,k[0]),D&3){T=k[1];let P;for(P=0;P<T.length;P+=1){const K=Le(k,T,P);E[P]?(E[P].p(K,D),M(E[P],1)):(E[P]=ze(K),E[P].c(),M(E[P],1),E[P].m(u,null))}for(ie(),P=T.length;P<E.length;P+=1)N(P);oe()}const F={};D&8&&(F.totalChecks=k[3]),D&32&&(F.points=k[5]),D&16&&(F.emergencyPoints=k[4]),D&4&&(F.disqualified=k[2]),g.$set(F)},i(k){if(!y){for(let D=0;D<T.length;D+=1)M(E[D]);M(g.$$.fragment,k),y=!0}},o(k){E=E.filter(Boolean);for(let D=0;D<E.length;D+=1)z(E[D]);z(g.$$.fragment,k),y=!1},d(k){k&&$(e),k&&$(r),k&&$(i),de(E,k),Q(g),_=!1,Y(O)}}}function Ct(t){return t.length-t.filter(e=>e.drop).length}function Pt(t,e,n){let s,r,i,l,o=1,u=p(1);function p(w){const y=[];for(let _=0;_<w;_++)y.push({type:A.Secret,minute:o,seconds:30,drop:!1});return y}function f(){console.log(o),n(1,u[u.length]={type:A.Secret,minute:o,seconds:30,drop:!1},u)}function m(){window.confirm("Are you sure you want to reset the score card?")&&(n(0,o=1),n(1,u=p(1)))}function d(w){const y=parseInt(w.minute);if(isNaN(y))return null;switch(w.type){case A.Emergency:const _=parseInt(w.seconds);if(!isNaN(_))return new pe(y,_);break;case A.Known:return new Ue(y);case A.Secret:return new Se(y);case A.Start:return new ke(y)}return null}function g(w,y){if(w<1)return null;const _=new vt(w);for(let O of y){const T=d(O);!O.drop&&T&&_.checkpoints.push(T)}return _}function j(w,y){const _=g(w,y);return _?_.points:"0"}function C(w,y){const _=g(w,y);return _?_.emergencyPoints:"0"}function S(w,y){const _=g(w,y);return _&&_.disqualified?"YES":"NO"}function b(){o=this.value,n(0,o)}function v(w,y,_,O){_[O]=w,n(1,u)}return t.$$.update=()=>{t.$$.dirty&3&&n(5,s=j(o,u)),t.$$.dirty&3&&n(4,r=C(o,u)),t.$$.dirty&2&&n(3,i=Ct(u)),t.$$.dirty&3&&n(2,l=S(o,u))},[o,u,l,i,r,s,f,m,b,v]}class Nt extends x{constructor(e){super(),Z(this,e,Pt,qt,X,{})}}function $t(t){let e,n,s,r,i,l,o;return l=new Nt({}),{c(){e=h("div"),n=h("h2"),n.textContent="Time Keeper Enduro",s=q(),r=h("p"),r.textContent="Tap Flags to change check type.",i=q(),ee(l.$$.fragment),a(e,"id","timeKeeper")},m(u,p){L(u,e,p),c(e,n),c(e,s),c(e,r),c(e,i),J(l,e,null),o=!0},p:B,i(u){o||(M(l.$$.fragment,u),o=!0)},o(u){z(l.$$.fragment,u),o=!1},d(u){u&&$(e),Q(l)}}}class Dt extends x{constructor(e){super(),Z(this,e,null,$t,X,{})}}function Kt(t){let e,n,s,r,i,l,o,u,p,f,m,d,g,j;return g=new pt({props:{items:t[0]}}),{c(){e=h("meta"),n=h("meta"),s=h("link"),r=h("meta"),i=h("link"),l=q(),o=h("main"),u=h("center"),p=h("h1"),p.textContent="Enduro Time Card",f=q(),m=h("p"),m.textContent=`You can verify your Enduro score cards using this tool. Why would
      you do that?  Because races are busy places and with hundreds of riders,
      those hard working club members sometimes enter something incorrectly.`,d=q(),ee(g.$$.fragment),a(e,"name","apple-mobile-web-app-capable"),a(e,"content","yes"),a(n,"name","viewport"),a(n,"content","width=device-width, initial-scale=1, maximum-scale=1"),a(s,"rel","apple-touch-icon"),a(s,"href",lt),a(r,"name","apple-mobile-web-app-title"),a(r,"content","Enduro Time Card"),a(i,"red","manifest"),a(i,"crossorigin","use-credentials"),a(i,"href","manifest.json")},m(C,S){c(document.head,e),c(document.head,n),c(document.head,s),c(document.head,r),c(document.head,i),L(C,l,S),L(C,o,S),c(o,u),c(u,p),c(u,f),c(u,m),c(u,d),J(g,u,null),j=!0},p:B,i(C){j||(M(g.$$.fragment,C),j=!0)},o(C){z(g.$$.fragment,C),j=!1},d(C){$(e),$(n),$(s),$(r),$(i),C&&$(l),C&&$(o),Q(g)}}}function Mt(t){return[[{label:"Sprint Enduro",value:2,component:gt},{label:"Time Keeper Enduro",value:1,component:Dt}]]}class Ot extends x{constructor(e){super(),Z(this,e,Mt,Kt,X,{})}}new Ot({target:document.getElementById("app")});
