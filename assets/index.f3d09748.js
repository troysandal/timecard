var tt=Object.defineProperty;var nt=(e,t,n)=>t in e?tt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Y=(e,t,n)=>(nt(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const s of l.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerpolicy&&(l.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?l.credentials="include":r.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(r){if(r.ep)return;r.ep=!0;const l=n(r);fetch(r.href,l)}})();function re(){}function le(e,t){for(const n in t)e[n]=t[n];return e}function We(e){return e()}function ze(){return Object.create(null)}function $(e){e.forEach(We)}function He(e){return typeof e=="function"}function ee(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let ge;function je(e,t){return ge||(ge=document.createElement("a")),ge.href=t,e===ge.href}function it(e){return Object.keys(e).length===0}function ce(e){const t={};for(const n in e)n[0]!=="$"&&(t[n]=e[n]);return t}function ie(e){return e==null?"":e}function rt(e){return e&&He(e.destroy)?e.destroy:re}function c(e,t){e.appendChild(t)}function J(e,t,n){e.insertBefore(t,n||null)}function B(e){e.parentNode&&e.parentNode.removeChild(e)}function Ze(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function b(e){return document.createElement(e)}function ae(e){return document.createTextNode(e)}function D(){return ae(" ")}function Z(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function d(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function ut(e){return Array.from(e.childNodes)}function Ke(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function Fe(e,t){e.value=t==null?"":t}function se(e,t,n,i){n===null?e.style.removeProperty(t):e.style.setProperty(t,n,i?"important":"")}function fe(e,t,n){e.classList[n?"add":"remove"](t)}function st(e,t,{bubbles:n=!1,cancelable:i=!1}={}){const r=document.createEvent("CustomEvent");return r.initCustomEvent(e,n,i,t),r}let _e;function pe(e){_e=e}function ot(){if(!_e)throw new Error("Function called outside component initialization");return _e}function lt(){const e=ot();return(t,n,{cancelable:i=!1}={})=>{const r=e.$$.callbacks[t];if(r){const l=st(t,n,{cancelable:i});return r.slice().forEach(s=>{s.call(e,l)}),!l.defaultPrevented}return!0}}const he=[],O=[],ve=[],Re=[],ft=Promise.resolve();let De=!1;function ct(){De||(De=!0,ft.then(xe))}function Ie(e){ve.push(e)}function F(e){Re.push(e)}const qe=new Set;let be=0;function xe(){const e=_e;do{for(;be<he.length;){const t=he[be];be++,pe(t),at(t.$$)}for(pe(null),he.length=0,be=0;O.length;)O.pop()();for(let t=0;t<ve.length;t+=1){const n=ve[t];qe.has(n)||(qe.add(n),n())}ve.length=0}while(he.length);for(;Re.length;)Re.pop()();De=!1,qe.clear(),pe(e)}function at(e){if(e.fragment!==null){e.update(),$(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Ie)}}const ye=new Set;let oe;function Ee(){oe={r:0,c:[],p:oe}}function Se(){oe.r||$(oe.c),oe=oe.p}function A(e,t){e&&e.i&&(ye.delete(e),e.i(t))}function j(e,t,n,i){if(e&&e.o){if(ye.has(e))return;ye.add(e),oe.c.push(()=>{ye.delete(e),i&&(n&&e.d(1),i())}),e.o(t)}else i&&i()}function dt(e,t){const n={},i={},r={$$scope:1};let l=e.length;for(;l--;){const s=e[l],u=t[l];if(u){for(const o in s)o in u||(i[o]=1);for(const o in u)r[o]||(n[o]=u[o],r[o]=1);e[l]=u}else for(const o in s)r[o]=1}for(const s in i)s in n||(n[s]=void 0);return n}function mt(e){return typeof e=="object"&&e!==null?e:{}}function U(e,t,n){const i=e.$$.props[t];i!==void 0&&(e.$$.bound[i]=n,n(e.$$.ctx[i]))}function Q(e){e&&e.c()}function G(e,t,n,i){const{fragment:r,after_update:l}=e.$$;r&&r.m(t,n),i||Ie(()=>{const s=e.$$.on_mount.map(We).filter(He);e.$$.on_destroy?e.$$.on_destroy.push(...s):$(s),e.$$.on_mount=[]}),l.forEach(Ie)}function X(e,t){const n=e.$$;n.fragment!==null&&($(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function ht(e,t){e.$$.dirty[0]===-1&&(he.push(e),ct(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function te(e,t,n,i,r,l,s,u=[-1]){const o=_e;pe(e);const f=e.$$={fragment:null,ctx:[],props:l,update:re,not_equal:r,bound:ze(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(o?o.$$.context:[])),callbacks:ze(),dirty:u,skip_bound:!1,root:t.target||o.$$.root};s&&s(f.root);let w=!1;if(f.ctx=n?n(e,t.props||{},(p,E,...k)=>{const C=k.length?k[0]:E;return f.ctx&&r(f.ctx[p],f.ctx[p]=C)&&(!f.skip_bound&&f.bound[p]&&f.bound[p](C),w&&ht(e,p)),E}):[],f.update(),w=!0,$(f.before_update),f.fragment=i?i(f.ctx):!1,t.target){if(t.hydrate){const p=ut(t.target);f.fragment&&f.fragment.l(p),p.forEach(B)}else f.fragment&&f.fragment.c();t.intro&&A(e.$$.fragment),G(e,t.target,t.anchor,t.customElement),xe()}pe(o)}class ne{$destroy(){X(this,1),this.$destroy=re}$on(t,n){if(!He(n))return re;const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(n),()=>{const r=i.indexOf(n);r!==-1&&i.splice(r,1)}}$set(t){this.$$set&&!it(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const pt="/timecard/assets/icon.110bac24.png";function $e(e){const t=e.getUTCHours().toString().padStart(2,"0"),n=e.getUTCMinutes().toString().padStart(2,"0"),i=e.getUTCSeconds().toString().padStart(2,"0");return`${t}:${n}:${i}`}function we(e){return!isNaN(parseInt(e.hour)+parseInt(e.minute)+parseInt(e.second))}function Ne(e){if(e.hour<0||e.hour>23||e.minute<0||e.minute>59||e.second<0||e.second>59)return;const t=new Date("1970-01-01");if(t.setUTCHours(e.hour),t.setUTCMinutes(e.minute),t.setUTCSeconds(e.second),!isNaN(t.valueOf()))return t}class _t{constructor(){Y(this,"tests",[])}get score(){let t=0;for(let n of this.tests)t+=n.score;return t}get scoreString(){return $e(new Date(this.score*1e3))}}class Te{constructor(){Y(this,"enter");Y(this,"exit")}static fromTimes(t,n){const i=Ne(t);let r=Ne(n);if(!i||!r)return;if(r<i){const s=Object.assign({},n);if(s.hour+=12,r=Ne(s),!r||r<i)return}const l=new Te;return l.enter=i,l.exit=r,l}get score(){return(this.exit.valueOf()-this.enter.valueOf())/1e3}get scoreString(){return $e(new Date(this.exit.valueOf()-this.enter.valueOf()))}}function gt(e){let t,n,i,r;return{c(){t=b("input"),d(t,"class",n=ie(e[10].class)+" svelte-8hu0a"),d(t,"style",e[5]),d(t,"placeholder",e[2]),d(t,"maxlength",e[3]),d(t,"pattern",e[4]),d(t,"inputmode",e[7]),fe(t,"error",!e[8](e[0]))},m(l,s){J(l,t,s),Fe(t,e[0]),e[14](t),i||(r=[Z(t,"input",e[13]),Z(t,"blur",e[9]),rt(e[6].call(null,t))],i=!0)},p(l,[s]){s&1024&&n!==(n=ie(l[10].class)+" svelte-8hu0a")&&d(t,"class",n),s&32&&d(t,"style",l[5]),s&4&&d(t,"placeholder",l[2]),s&8&&d(t,"maxlength",l[3]),s&16&&d(t,"pattern",l[4]),s&128&&d(t,"inputmode",l[7]),s&1&&t.value!==l[0]&&Fe(t,l[0]),s&1281&&fe(t,"error",!l[8](l[0]))},i:re,o:re,d(l){l&&B(t),e[14](null),i=!1,$(r)}}}function bt(){let e=!!window.chrome;return e=e&&/Android|iPhone/i.test(navigator.userAgent),e?"numeric":void 0}function vt(e,t,n){let{placeholder:i=""}=t,{value:r=""}=t,{ref:l=null}=t,{pad:s=null}=t,{maxlength:u=null}=t,{pattern:o="[0-9]*"}=t,{validator:f=()=>!0}=t,{style:w}=t,{initRow:p=()=>{}}=t,{inputmode:E=bt()}=t;function k(a){return f(a)}function C(){s>0&&r&&k(r)&&r.length===1&&n(0,r=r.padStart(s,"0"))}function T(){r=this.value,n(0,r)}function q(a){O[a?"unshift":"push"](()=>{l=a,n(1,l)})}return e.$$set=a=>{n(10,t=le(le({},t),ce(a))),"placeholder"in a&&n(2,i=a.placeholder),"value"in a&&n(0,r=a.value),"ref"in a&&n(1,l=a.ref),"pad"in a&&n(11,s=a.pad),"maxlength"in a&&n(3,u=a.maxlength),"pattern"in a&&n(4,o=a.pattern),"validator"in a&&n(12,f=a.validator),"style"in a&&n(5,w=a.style),"initRow"in a&&n(6,p=a.initRow),"inputmode"in a&&n(7,E=a.inputmode)},t=ce(t),[r,l,i,u,o,w,p,E,k,C,t,s,f,T,q]}class Ce extends ne{constructor(t){super(),te(this,t,vt,gt,ee,{placeholder:2,value:0,ref:1,pad:11,maxlength:3,pattern:4,validator:12,style:5,initRow:6,inputmode:7})}}function yt(e){let t,n,i,r;const l=[e[2],{pad:"2"},{maxlength:"2"},{style:"width:1.75em"}];function s(f){e[3](f)}function u(f){e[4](f)}let o={};for(let f=0;f<l.length;f+=1)o=le(o,l[f]);return e[0]!==void 0&&(o.value=e[0]),e[1]!==void 0&&(o.ref=e[1]),t=new Ce({props:o}),O.push(()=>U(t,"value",s)),O.push(()=>U(t,"ref",u)),{c(){Q(t.$$.fragment)},m(f,w){G(t,f,w),r=!0},p(f,[w]){const p=w&4?dt(l,[mt(f[2]),l[1],l[2],l[3]]):{};!n&&w&1&&(n=!0,p.value=f[0],F(()=>n=!1)),!i&&w&2&&(i=!0,p.ref=f[1],F(()=>i=!1)),t.$set(p)},i(f){r||(A(t.$$.fragment,f),r=!0)},o(f){j(t.$$.fragment,f),r=!1},d(f){X(t,f)}}}function wt(e,t,n){let{value:i}=t,{ref:r=null}=t;function l(u){i=u,n(0,i)}function s(u){r=u,n(1,r)}return e.$$set=u=>{n(2,t=le(le({},t),ce(u))),"value"in u&&n(0,i=u.value),"ref"in u&&n(1,r=u.ref)},t=ce(t),[i,r,t,l,s]}class Pe extends ne{constructor(t){super(),te(this,t,wt,yt,ee,{value:0,ref:1})}}function kt(e){let t,n,i,r,l,s,u,o,f,w,p,E;function k(g){e[11](g)}function C(g){e[12](g)}let T={placeholder:"hh",class:e[9].initRow?"enterTime":"exitTime",validator:e[6],initRow:e[9].initRow};e[3]!==void 0&&(T.ref=e[3]),e[0]!==void 0&&(T.value=e[0]),t=new Pe({props:T}),O.push(()=>U(t,"ref",k)),O.push(()=>U(t,"value",C));function q(g){e[13](g)}function a(g){e[14](g)}let v={placeholder:"mm",class:e[9].initRow?"enterTime":"exitTime",validator:e[7]};e[4]!==void 0&&(v.ref=e[4]),e[1]!==void 0&&(v.value=e[1]),l=new Pe({props:v}),O.push(()=>U(l,"ref",q)),O.push(()=>U(l,"value",a));function m(g){e[15](g)}function h(g){e[16](g)}let _={placeholder:"ss",class:e[9].initRow?"enterTime":"exitTime",validator:e[8]};return e[5]!==void 0&&(_.ref=e[5]),e[2]!==void 0&&(_.value=e[2]),f=new Pe({props:_}),O.push(()=>U(f,"ref",m)),O.push(()=>U(f,"value",h)),{c(){Q(t.$$.fragment),r=D(),Q(l.$$.fragment),o=D(),Q(f.$$.fragment)},m(g,y){G(t,g,y),J(g,r,y),G(l,g,y),J(g,o,y),G(f,g,y),E=!0},p(g,[y]){const I={};y&512&&(I.class=g[9].initRow?"enterTime":"exitTime"),y&512&&(I.initRow=g[9].initRow),!n&&y&8&&(n=!0,I.ref=g[3],F(()=>n=!1)),!i&&y&1&&(i=!0,I.value=g[0],F(()=>i=!1)),t.$set(I);const S={};y&512&&(S.class=g[9].initRow?"enterTime":"exitTime"),!s&&y&16&&(s=!0,S.ref=g[4],F(()=>s=!1)),!u&&y&2&&(u=!0,S.value=g[1],F(()=>u=!1)),l.$set(S);const H={};y&512&&(H.class=g[9].initRow?"enterTime":"exitTime"),!w&&y&32&&(w=!0,H.ref=g[5],F(()=>w=!1)),!p&&y&4&&(p=!0,H.value=g[2],F(()=>p=!1)),f.$set(H)},i(g){E||(A(t.$$.fragment,g),A(l.$$.fragment,g),A(f.$$.fragment,g),E=!0)},o(g){j(t.$$.fragment,g),j(l.$$.fragment,g),j(f.$$.fragment,g),E=!1},d(g){X(t,g),g&&B(r),X(l,g),g&&B(o),X(f,g)}}}function Me(e,t){return n=>n===void 0||n===""?!0:!isNaN(parseInt(n))&&n>=e&&n<=t}function Ue(e,t,n=()=>!0){e&&e.length==2&&n(e)&&t.focus()}function Et(e,t,n){let{hour:i}=t,{minute:r}=t,{second:l}=t,{onSeconds:s=()=>{}}=t,{refHour:u}=t,o,f;const w=Me(0,23),p=Me(0,59),E=Me(0,59);function k(){l&&l.length==2&&E(l)&&s()}function C(h){u=h,n(3,u)}function T(h){i=h,n(0,i)}function q(h){o=h,n(4,o)}function a(h){r=h,n(1,r)}function v(h){f=h,n(5,f)}function m(h){l=h,n(2,l)}return e.$$set=h=>{n(9,t=le(le({},t),ce(h))),"hour"in h&&n(0,i=h.hour),"minute"in h&&n(1,r=h.minute),"second"in h&&n(2,l=h.second),"onSeconds"in h&&n(10,s=h.onSeconds),"refHour"in h&&n(3,u=h.refHour)},e.$$.update=()=>{e.$$.dirty&17&&Ue(i,o,w),e.$$.dirty&34&&Ue(r,f,p),e.$$.dirty&4&&k(),e.$$.dirty&7},t=ce(t),[i,r,l,u,o,f,w,p,E,t,s,C,T,q,a,v,m]}class Be extends ne{constructor(t){super(),te(this,t,Et,kt,ee,{hour:0,minute:1,second:2,onSeconds:10,refHour:3})}}function ke(e){return{hour:parseInt(e.hour),minute:parseInt(e.minute),second:parseInt(e.second)}}function St(e){let t,n,i=e[2]+1+"",r,l,s,u,o,f,w,p,E,k,C,T,q,a,v,m,h,_,g,y,I,S;function H(R){e[7](R)}function M(R){e[8](R)}function ue(R){e[9](R)}let N={initRow:Tt,onSeconds:e[6]};e[0].hour!==void 0&&(N.hour=e[0].hour),e[0].minute!==void 0&&(N.minute=e[0].minute),e[0].second!==void 0&&(N.second=e[0].second),f=new Be({props:N}),O.push(()=>U(f,"hour",H)),O.push(()=>U(f,"minute",M)),O.push(()=>U(f,"second",ue));function L(R){e[10](R)}function x(R){e[11](R)}function K(R){e[12](R)}function P(R){e[13](R)}let z={};return e[3]!==void 0&&(z.refHour=e[3]),e[1].hour!==void 0&&(z.hour=e[1].hour),e[1].minute!==void 0&&(z.minute=e[1].minute),e[1].second!==void 0&&(z.second=e[1].second),T=new Be({props:z}),O.push(()=>U(T,"refHour",L)),O.push(()=>U(T,"hour",x)),O.push(()=>U(T,"minute",K)),O.push(()=>U(T,"second",P)),{c(){t=b("tr"),n=b("td"),r=ae(i),l=D(),s=b("button"),s.textContent="\u274C",u=D(),o=b("td"),Q(f.$$.fragment),k=D(),C=b("td"),Q(T.$$.fragment),h=D(),_=b("td"),g=b("input"),d(n,"class","svelte-12q6ax7"),d(o,"class","svelte-12q6ax7"),d(C,"class","svelte-12q6ax7"),g.disabled=!0,g.value=e[4],d(g,"class","score svelte-12q6ax7"),d(_,"class","svelte-12q6ax7")},m(R,W){J(R,t,W),c(t,n),c(n,r),c(n,l),c(n,s),c(t,u),c(t,o),G(f,o,null),c(t,k),c(t,C),G(T,C,null),c(t,h),c(t,_),c(_,g),y=!0,I||(S=Z(s,"click",e[5]),I=!0)},p(R,[W]){(!y||W&4)&&i!==(i=R[2]+1+"")&&Ke(r,i);const de={};W&8&&(de.onSeconds=R[6]),!w&&W&1&&(w=!0,de.hour=R[0].hour,F(()=>w=!1)),!p&&W&1&&(p=!0,de.minute=R[0].minute,F(()=>p=!1)),!E&&W&1&&(E=!0,de.second=R[0].second,F(()=>E=!1)),f.$set(de);const me={};!q&&W&8&&(q=!0,me.refHour=R[3],F(()=>q=!1)),!a&&W&2&&(a=!0,me.hour=R[1].hour,F(()=>a=!1)),!v&&W&2&&(v=!0,me.minute=R[1].minute,F(()=>v=!1)),!m&&W&2&&(m=!0,me.second=R[1].second,F(()=>m=!1)),T.$set(me),(!y||W&16&&g.value!==R[4])&&(g.value=R[4])},i(R){y||(A(f.$$.fragment,R),A(T.$$.fragment,R),y=!0)},o(R){j(f.$$.fragment,R),j(T.$$.fragment,R),y=!1},d(R){R&&B(t),X(f),X(T),I=!1,S()}}}function Tt(e){e.focus()}function Ct(e,t,n){let i;const r=lt();function l(){r("delete",{index:s})}let{index:s}=t,{testDatumEnter:u}=t,{testDatumExit:o}=t;function f(m,h){const _=ke(m),g=ke(h);if(we(_)&&we(g)){const y=Te.fromTimes(_,g);if(y)return y.scoreString}return""}let w;const p=()=>{w.focus()};function E(m){e.$$.not_equal(u.hour,m)&&(u.hour=m,n(0,u))}function k(m){e.$$.not_equal(u.minute,m)&&(u.minute=m,n(0,u))}function C(m){e.$$.not_equal(u.second,m)&&(u.second=m,n(0,u))}function T(m){w=m,n(3,w)}function q(m){e.$$.not_equal(o.hour,m)&&(o.hour=m,n(1,o))}function a(m){e.$$.not_equal(o.minute,m)&&(o.minute=m,n(1,o))}function v(m){e.$$.not_equal(o.second,m)&&(o.second=m,n(1,o))}return e.$$set=m=>{"index"in m&&n(2,s=m.index),"testDatumEnter"in m&&n(0,u=m.testDatumEnter),"testDatumExit"in m&&n(1,o=m.testDatumExit)},e.$$.update=()=>{e.$$.dirty&3&&n(4,i=f(u,o))},[u,o,s,w,i,l,p,E,k,C,T,q,a,v]}class qt extends ne{constructor(t){super(),te(this,t,Ct,St,ee,{index:2,testDatumEnter:0,testDatumExit:1})}}function Ve(e,t,n){const i=e.slice();return i[8]=t[n],i[9]=t,i[10]=n,i}function Ge(e){let t,n,i,r;function l(o){e[5](o,e[8])}function s(o){e[6](o,e[8])}let u={index:e[10]};return e[8].enter!==void 0&&(u.testDatumEnter=e[8].enter),e[8].exit!==void 0&&(u.testDatumExit=e[8].exit),t=new qt({props:u}),O.push(()=>U(t,"testDatumEnter",l)),O.push(()=>U(t,"testDatumExit",s)),t.$on("delete",e[4]),{c(){Q(t.$$.fragment)},m(o,f){G(t,o,f),r=!0},p(o,f){e=o;const w={};!n&&f&1&&(n=!0,w.testDatumEnter=e[8].enter,F(()=>n=!1)),!i&&f&1&&(i=!0,w.testDatumExit=e[8].exit,F(()=>i=!1)),t.$set(w)},i(o){r||(A(t.$$.fragment,o),r=!0)},o(o){j(t.$$.fragment,o),r=!1},d(o){X(t,o)}}}function Nt(e){let t,n,i,r,l,s,u,o,f,w,p,E,k,C,T,q,a,v,m,h=e[0],_=[];for(let y=0;y<h.length;y+=1)_[y]=Ge(Ve(e,h,y));const g=y=>j(_[y],1,1,()=>{_[y]=null});return{c(){t=b("table"),n=b("thead"),n.innerHTML=`<tr><th class="svelte-1670vm0">Test #</th> 
            <th class="svelte-1670vm0">Time In</th> 
            <th class="svelte-1670vm0">Time Out</th> 
            <th class="svelte-1670vm0">Score</th></tr>`,i=D(),r=b("tbody");for(let y=0;y<_.length;y+=1)_[y].c();l=D(),s=b("tfoot"),u=b("tr"),o=b("th"),f=b("div"),w=ae("Total Score: "),p=b("span"),E=ae(e[1]),k=D(),C=b("button"),C.textContent="Add a Test",T=D(),q=b("button"),q.textContent="Reset",d(p,"class","score"),d(f,"id","overallScore"),d(C,"id","addTest"),d(q,"id","reset"),d(o,"colspan","4"),d(o,"class","svelte-1670vm0"),d(s,"class","svelte-1670vm0"),d(t,"class","svelte-1670vm0")},m(y,I){J(y,t,I),c(t,n),c(t,i),c(t,r);for(let S=0;S<_.length;S+=1)_[S].m(r,null);c(t,l),c(t,s),c(s,u),c(u,o),c(o,f),c(f,w),c(f,p),c(p,E),c(o,k),c(o,C),c(o,T),c(o,q),a=!0,v||(m=[Z(C,"click",e[2]),Z(q,"click",e[3])],v=!0)},p(y,[I]){if(I&17){h=y[0];let S;for(S=0;S<h.length;S+=1){const H=Ve(y,h,S);_[S]?(_[S].p(H,I),A(_[S],1)):(_[S]=Ge(H),_[S].c(),A(_[S],1),_[S].m(r,null))}for(Ee(),S=h.length;S<_.length;S+=1)g(S);Se()}(!a||I&2)&&Ke(E,y[1])},i(y){if(!a){for(let I=0;I<h.length;I+=1)A(_[I]);a=!0}},o(y){_=_.filter(Boolean);for(let I=0;I<_.length;I+=1)j(_[I]);a=!1},d(y){y&&B(t),Ze(_,y),v=!1,$(m)}}}function Xe(){const e=[];for(let n=0;n<1;n++)e.push({enter:{hour:"",minute:"",second:""},exit:{hour:"",minute:"",second:""}});return e}function Pt(e,t,n){let i,r=Xe();function l(){n(0,r[r.length]={enter:{hour:"",minute:"",second:""},exit:{hour:"",minute:"",second:""}},r)}function s(){window.confirm("Are you sure you want to reset the Sprint Enduro?")&&n(0,r=Xe())}function u(){let p=new _t;for(let E of r){const k=ke(E.enter),C=ke(E.exit);if(we(k)&&we(C)){const T=Te.fromTimes(k,C);T&&p.tests.push(T)}}return p.scoreString}function o(p){window.confirm(`You sure you want to delete test ${p.detail.index+1}?`)&&n(0,r=r.filter((E,k)=>k!==p.detail.index))}function f(p,E){e.$$.not_equal(E.enter,p)&&(E.enter=p,n(0,r))}function w(p,E){e.$$.not_equal(E.exit,p)&&(E.exit=p,n(0,r))}return e.$$.update=()=>{e.$$.dirty&1&&n(1,i=u())},[r,i,l,s,o,f,w]}class Mt extends ne{constructor(t){super(),te(this,t,Pt,Nt,ee,{})}}var V=(e=>(e[e.Start=0]="Start",e[e.Known=1]="Known",e[e.Secret=2]="Secret",e[e.Emergency=3]="Emergency",e))(V||{});class Ae{constructor(t){Y(this,"type",0);Y(this,"minute",0);Y(this,"seconds",0);this.minute=t}points(t){let n=0;return this.minute>=t&&(n=this.minute-t),n}disqualified(t){return!1}}class et extends Ae{constructor(n){super(n);Y(this,"type",1)}disqualified(n){return n-this.minute>15}}class Oe{constructor(t){Y(this,"type",2);Y(this,"minute",0);Y(this,"seconds",0);this.minute=t}points(t){let n=0;return this.minute>=t?n=this.minute-t:n=5*(t-this.minute)-3,n}disqualified(t){return!1}}class Le extends Oe{constructor(n,i){super(n);Y(this,"type",3);this.seconds=i}emergencyPoints(n){return this.minute==n?Math.abs(this.seconds-30):this.minute>n?30+this.seconds+60*(this.minute-n-1):30+(60-this.seconds)+60*(n-this.minute-1)}}class Rt{constructor(t){Y(this,"riderMinute",1);Y(this,"checkpoints",[]);console.assert(t>=1),this.riderMinute=t}get points(){return this.checkpoints.map(t=>t.points(this.riderMinute)).reduce((t,n)=>t+n,0)}get emergencyPoints(){return this.checkpoints.map(t=>t instanceof Le?t.emergencyPoints(this.riderMinute):0).reduce((t,n)=>t+n,0)}get disqualified(){return this.checkpoints.some(t=>t.disqualified(this.riderMinute))}}function Ye(e){let t,n,i;function r(s){e[9](s)}let l={validator:Kt,class:e[2],size:"2",style:"width:2em"};return e[0].seconds!==void 0&&(l.value=e[0].seconds),t=new Ce({props:l}),O.push(()=>U(t,"value",r)),{c(){Q(t.$$.fragment)},m(s,u){G(t,s,u),i=!0},p(s,u){const o={};u&4&&(o.class=s[2]),!n&&u&1&&(n=!0,o.value=s[0].seconds,F(()=>n=!1)),t.$set(o)},i(s){i||(A(t.$$.fragment,s),i=!0)},o(s){j(t.$$.fragment,s),i=!1},d(s){X(t,s)}}}function Dt(e){let t,n,i,r,l,s,u=e[1]+1+"",o,f,w,p,E,k,C,T,q,a,v,m,h,_,g,y,I,S,H,M,ue,N;function L(P){e[8](P)}let x={pattern:null,validator:Ht,initRow:It,class:e[2],size:"3",style:"width:2em"};e[0].minute!==void 0&&(x.value=e[0].minute),p=new Ce({props:x}),O.push(()=>U(p,"value",L));let K=e[0].type===V.Emergency&&Ye(e);return{c(){t=b("tr"),n=b("td"),i=b("img"),l=D(),s=b("td"),o=ae(u),f=D(),w=b("td"),Q(p.$$.fragment),k=D(),C=b("td"),K&&K.c(),T=D(),q=b("td"),a=b("input"),m=D(),h=b("td"),_=b("input"),y=D(),I=b("td"),S=b("input"),je(i.src,r=e[3])||d(i,"src",r),d(i,"alt","Flag"),d(i,"class","svelte-1ym5x0u"),d(n,"class","svelte-1ym5x0u"),d(s,"class","svelte-1ym5x0u"),d(w,"class","svelte-1ym5x0u"),d(C,"class","svelte-1ym5x0u"),d(a,"class",v=ie(e[2])+" svelte-1ym5x0u"),a.disabled=!0,a.value=e[5],d(a,"size","3"),se(a,"width","2em"),d(q,"class","svelte-1ym5x0u"),d(_,"class",g=ie(e[2])+" svelte-1ym5x0u"),_.disabled=!0,_.value=e[4],d(_,"size","4"),se(_,"width","3em"),d(h,"class","svelte-1ym5x0u"),d(S,"type","checkbox"),d(S,"class","svelte-1ym5x0u"),d(I,"class","svelte-1ym5x0u"),d(t,"class",H=ie(e[2])+" svelte-1ym5x0u")},m(P,z){J(P,t,z),c(t,n),c(n,i),c(t,l),c(t,s),c(s,o),c(t,f),c(t,w),G(p,w,null),c(t,k),c(t,C),K&&K.m(C,null),c(t,T),c(t,q),c(q,a),c(t,m),c(t,h),c(h,_),c(t,y),c(t,I),c(I,S),S.checked=e[0].drop,M=!0,ue||(N=[Z(i,"click",e[6]),Z(i,"keydown",At),Z(S,"change",e[10])],ue=!0)},p(P,[z]){(!M||z&8&&!je(i.src,r=P[3]))&&d(i,"src",r),(!M||z&2)&&u!==(u=P[1]+1+"")&&Ke(o,u);const R={};z&4&&(R.class=P[2]),!E&&z&1&&(E=!0,R.value=P[0].minute,F(()=>E=!1)),p.$set(R),P[0].type===V.Emergency?K?(K.p(P,z),z&1&&A(K,1)):(K=Ye(P),K.c(),A(K,1),K.m(C,null)):K&&(Ee(),j(K,1,1,()=>{K=null}),Se()),(!M||z&4&&v!==(v=ie(P[2])+" svelte-1ym5x0u"))&&d(a,"class",v),(!M||z&32&&a.value!==P[5])&&(a.value=P[5]),(!M||z&4&&g!==(g=ie(P[2])+" svelte-1ym5x0u"))&&d(_,"class",g),(!M||z&16&&_.value!==P[4])&&(_.value=P[4]),z&1&&(S.checked=P[0].drop),(!M||z&4&&H!==(H=ie(P[2])+" svelte-1ym5x0u"))&&d(t,"class",H)},i(P){M||(A(p.$$.fragment,P),A(K),M=!0)},o(P){j(p.$$.fragment,P),j(K),M=!1},d(P){P&&B(t),X(p),K&&K.d(),ue=!1,$(N)}}}function It(e){e.focus()}function Ht(e){return!(e==null||e==="")}function Kt(e){return e===void 0||e===""?!1:!isNaN(parseInt(e))&&e>=0&&e<=59}const At=()=>{};function Ot(e,t,n){let i,r,l,s,{check:u}=t,{index:o}=t,{riderMinute:f}=t;function w(v){const m=parseInt(v.minute);if(isNaN(m))return null;switch(v.type){case V.Emergency:const h=parseInt(v.seconds);if(!isNaN(h))return new Le(m,h);break;case V.Known:return new et(m);case V.Secret:return new Oe(m);case V.Start:return new Ae(m)}return null}function p(v,m){const h=w(v);return h?h.points(m):0}function E(v,m){const h=w(v);return h&&h.type===V.Emergency?h.emergencyPoints(m):0}function k(v){return{[V.Start]:"./images/start.png",[V.Known]:"./images/known.png",[V.Secret]:"./images/secret.png",[V.Emergency]:"./images/emergency.png"}[v.type]}function C(){n(0,u.type=(u.type+1)%4,u)}function T(v){e.$$.not_equal(u.minute,v)&&(u.minute=v,n(0,u))}function q(v){e.$$.not_equal(u.seconds,v)&&(u.seconds=v,n(0,u))}function a(){u.drop=this.checked,n(0,u)}return e.$$set=v=>{"check"in v&&n(0,u=v.check),"index"in v&&n(1,o=v.index),"riderMinute"in v&&n(7,f=v.riderMinute)},e.$$.update=()=>{e.$$.dirty&129&&n(5,i=p(u,f)),e.$$.dirty&129&&n(4,r=E(u,f)),e.$$.dirty&1&&n(3,l=k(u)),e.$$.dirty&1&&n(2,s=u.drop?"dropped":"")},[u,o,s,l,r,i,C,f,T,q,a]}class Lt extends ne{constructor(t){super(),te(this,t,Ot,Dt,ee,{check:0,index:1,riderMinute:7})}}function zt(e){let t,n,i,r,l,s,u,o,f,w,p,E,k,C,T,q;return{c(){t=b("table"),n=b("tbody"),i=b("tr"),i.innerHTML=`<th class="svelte-1t04yu8">Checks</th> 
            <th class="svelte-1t04yu8">Points</th> 
            <th class="svelte-1t04yu8">Emergency<br/>Points</th> 
            <th class="svelte-1t04yu8">Disqualified</th>`,r=D(),l=b("tr"),s=b("td"),u=b("input"),o=D(),f=b("td"),w=b("input"),p=D(),E=b("td"),k=b("input"),C=D(),T=b("td"),q=b("input"),d(u,"id","checks"),u.disabled=!0,u.value=e[0],d(u,"size","2"),se(u,"width","2em"),d(u,"class","svelte-1t04yu8"),d(s,"class","svelte-1t04yu8"),d(w,"id","points"),w.disabled=!0,w.value=e[1],d(w,"size","4"),se(w,"width","3em"),d(w,"class","svelte-1t04yu8"),d(f,"class","svelte-1t04yu8"),d(k,"id","emergencyPoints"),k.disabled=!0,k.value=e[2],d(k,"size","4"),se(k,"width","3em"),d(k,"class","svelte-1t04yu8"),d(E,"class","svelte-1t04yu8"),d(q,"id","disqualified"),q.disabled=!0,q.value=e[3],d(q,"size","4"),se(q,"width","3em"),d(q,"class","svelte-1t04yu8"),d(T,"class","svelte-1t04yu8"),se(t,"margin","auto")},m(a,v){J(a,t,v),c(t,n),c(n,i),c(n,r),c(n,l),c(l,s),c(s,u),c(l,o),c(l,f),c(f,w),c(l,p),c(l,E),c(E,k),c(l,C),c(l,T),c(T,q)},p(a,[v]){v&1&&u.value!==a[0]&&(u.value=a[0]),v&2&&w.value!==a[1]&&(w.value=a[1]),v&4&&k.value!==a[2]&&(k.value=a[2]),v&8&&q.value!==a[3]&&(q.value=a[3])},i:re,o:re,d(a){a&&B(t)}}}function jt(e,t,n){let{totalChecks:i}=t,{points:r}=t,{emergencyPoints:l}=t,{disqualified:s}=t;return e.$$set=u=>{"totalChecks"in u&&n(0,i=u.totalChecks),"points"in u&&n(1,r=u.points),"emergencyPoints"in u&&n(2,l=u.emergencyPoints),"disqualified"in u&&n(3,s=u.disqualified)},[i,r,l,s]}class Ft extends ne{constructor(t){super(),te(this,t,jt,zt,ee,{totalChecks:0,points:1,emergencyPoints:2,disqualified:3})}}function Je(e,t,n){const i=e.slice();return i[16]=t[n],i[17]=t,i[18]=n,i}function Qe(e){let t,n,i;function r(s){e[9](s,e[16],e[17],e[18])}let l={riderMinute:e[0],index:e[18]};return e[16]!==void 0&&(l.check=e[16]),t=new Lt({props:l}),O.push(()=>U(t,"check",r)),{c(){Q(t.$$.fragment)},m(s,u){G(t,s,u),i=!0},p(s,u){e=s;const o={};u&1&&(o.riderMinute=e[0]),!n&&u&2&&(n=!0,o.check=e[16],F(()=>n=!1)),t.$set(o)},i(s){i||(A(t.$$.fragment,s),i=!0)},o(s){j(t.$$.fragment,s),i=!1},d(s){X(t,s)}}}function Ut(e){let t,n,i,r,l,s,u,o,f,w,p,E,k,C,T,q,a,v,m,h,_,g,y;function I(N){e[8](N)}let S={validator:Vt,size:"3",min:"1",style:"width:3em"};e[0]!==void 0&&(S.value=e[0]),i=new Ce({props:S}),O.push(()=>U(i,"value",I));let H=e[1],M=[];for(let N=0;N<H.length;N+=1)M[N]=Qe(Je(e,H,N));const ue=N=>j(M[N],1,1,()=>{M[N]=null});return C=new Ft({props:{totalChecks:e[3],points:e[5],emergencyPoints:e[4],disqualified:e[2]}}),{c(){t=b("div"),n=ae("Rider Minute: "),Q(i.$$.fragment),l=D(),s=b("table"),u=b("thead"),u.innerHTML=`<tr><th class="svelte-1976845"></th> 
            <th class="svelte-1976845">#</th> 
            <th class="svelte-1976845">Minute</th> 
            <th class="svelte-1976845">Second</th> 
            <th class="svelte-1976845">Points</th> 
            <th class="svelte-1976845">Emergency<br/>Points</th> 
            <th class="svelte-1976845">Drop</th></tr>`,o=D(),f=b("tbody");for(let N=0;N<M.length;N+=1)M[N].c();w=D(),p=b("tfoot"),E=b("tr"),k=b("td"),Q(C.$$.fragment),T=D(),q=b("tr"),a=b("th"),v=b("button"),v.textContent="Add a Check",m=D(),h=b("button"),h.textContent="Reset",d(t,"id","riderMinute"),d(t,"class","svelte-1976845"),d(k,"colspan","7"),d(v,"id","addCheck"),d(h,"id","reset"),d(a,"colspan","7"),d(a,"class","svelte-1976845"),d(p,"class","svelte-1976845"),d(s,"class","svelte-1976845")},m(N,L){J(N,t,L),c(t,n),G(i,t,null),J(N,l,L),J(N,s,L),c(s,u),c(s,o),c(s,f);for(let x=0;x<M.length;x+=1)M[x].m(f,null);c(s,w),c(s,p),c(p,E),c(E,k),G(C,k,null),c(p,T),c(p,q),c(q,a),c(a,v),c(a,m),c(a,h),_=!0,g||(y=[Z(v,"click",e[6]),Z(h,"click",e[7])],g=!0)},p(N,[L]){const x={};if(!r&&L&1&&(r=!0,x.value=N[0],F(()=>r=!1)),i.$set(x),L&3){H=N[1];let P;for(P=0;P<H.length;P+=1){const z=Je(N,H,P);M[P]?(M[P].p(z,L),A(M[P],1)):(M[P]=Qe(z),M[P].c(),A(M[P],1),M[P].m(f,null))}for(Ee(),P=H.length;P<M.length;P+=1)ue(P);Se()}const K={};L&8&&(K.totalChecks=N[3]),L&32&&(K.points=N[5]),L&16&&(K.emergencyPoints=N[4]),L&4&&(K.disqualified=N[2]),C.$set(K)},i(N){if(!_){A(i.$$.fragment,N);for(let L=0;L<H.length;L+=1)A(M[L]);A(C.$$.fragment,N),_=!0}},o(N){j(i.$$.fragment,N),M=M.filter(Boolean);for(let L=0;L<M.length;L+=1)j(M[L]);j(C.$$.fragment,N),_=!1},d(N){N&&B(t),X(i),N&&B(l),N&&B(s),Ze(M,N),X(C),g=!1,$(y)}}}function Bt(e){return e.length-e.filter(t=>t.drop).length}function Vt(e){return e===void 0||e===""?!1:!isNaN(parseInt(e))&&e>=1}function Gt(e,t,n){let i,r,l,s,u=1,o=f(1);function f(m){const h=[];for(let _=0;_<m;_++)h.push({type:V.Secret,minute:u,seconds:30,drop:!1});return h}function w(){n(1,o[o.length]={type:V.Secret,minute:u,seconds:30,drop:!1},o)}function p(){window.confirm("Are you sure you want to reset the score card?")&&(n(0,u=1),n(1,o=f(1)))}function E(m){const h=parseInt(m.minute);if(isNaN(h))return null;switch(m.type){case V.Emergency:const _=parseInt(m.seconds);if(!isNaN(_))return new Le(h,_);break;case V.Known:return new et(h);case V.Secret:return new Oe(h);case V.Start:return new Ae(h)}return null}function k(m,h){if(m<1)return null;const _=new Rt(m);for(let g of h){const y=E(g);!g.drop&&y&&_.checkpoints.push(y)}return _}function C(m,h){const _=k(m,h);return _?_.points:"0"}function T(m,h){const _=k(m,h);return _?_.emergencyPoints:"0"}function q(m,h){const _=k(m,h);return _&&_.disqualified?"YES":"NO"}function a(m){u=m,n(0,u)}function v(m,h,_,g){_[g]=m,n(1,o)}return e.$$.update=()=>{e.$$.dirty&3&&n(5,i=C(u,o)),e.$$.dirty&3&&n(4,r=T(u,o)),e.$$.dirty&2&&n(3,l=Bt(o)),e.$$.dirty&3&&n(2,s=q(u,o))},[u,o,s,l,r,i,w,p,a,v]}class Xt extends ne{constructor(t){super(),te(this,t,Gt,Ut,ee,{})}}function Yt(e){let t,n,i,r,l,s,u;return s=new Xt({}),{c(){t=b("div"),n=b("h2"),n.textContent="Time Keeper Enduro",i=D(),r=b("p"),r.textContent="Tap Flags to change check type.",l=D(),Q(s.$$.fragment),d(t,"id","timeKeeper")},m(o,f){J(o,t,f),c(t,n),c(t,i),c(t,r),c(t,l),G(s,t,null),u=!0},i(o){u||(A(s.$$.fragment,o),u=!0)},o(o){j(s.$$.fragment,o),u=!1},d(o){o&&B(t),X(s)}}}function Jt(e){let t,n,i,r,l,s,u;return s=new Mt({}),{c(){t=b("div"),n=b("h2"),n.textContent="Sprint Enduro",i=D(),r=b("p"),r.innerHTML="Enter <b>Hours</b> in 24 Hour Time, e.g. 2PM == 14",l=D(),Q(s.$$.fragment),d(t,"id","sprint")},m(o,f){J(o,t,f),c(t,n),c(t,i),c(t,r),c(t,l),G(s,t,null),u=!0},i(o){u||(A(s.$$.fragment,o),u=!0)},o(o){j(s.$$.fragment,o),u=!1},d(o){o&&B(t),X(s)}}}function Qt(e){let t,n,i,r,l,s,u,o,f,w,p,E,k,C,T,q,a,v,m,h,_;const g=[Jt,Yt],y=[];function I(S,H){return S[0]==="sprint"?0:1}return a=I(e),v=y[a]=g[a](e),{c(){t=b("meta"),n=b("meta"),i=b("link"),r=b("meta"),l=b("link"),s=D(),u=b("main"),o=b("center"),f=b("h1"),f.textContent="Enduro Time Card",w=D(),p=b("p"),p.innerHTML=`Verify Enduro score cards using this tool. Races are busy places and with
      hundreds of riders, hard working club members sometimes make mistakes.
      <a href="https://mobilesyrup.com/2020/05/24/how-install-progressive-web-app-pwa-android-ios-pc-mac/"><b>Install</b></a> onto your phone before the race!`,E=D(),k=b("button"),k.textContent="Sprint",C=D(),T=b("button"),T.textContent="Time Keeper",q=D(),v.c(),d(t,"name","apple-mobile-web-app-capable"),d(t,"content","yes"),d(n,"name","viewport"),d(n,"content","width=device-width, initial-scale=1, maximum-scale=1"),d(i,"rel","apple-touch-icon"),d(i,"href",pt),d(r,"name","apple-mobile-web-app-title"),d(r,"content","Enduro Time Card"),d(l,"red","manifest"),d(l,"crossorigin","use-credentials"),d(l,"href","manifest.json"),d(k,"class","svelte-py93mz"),fe(k,"selected",e[0]==="sprint"),d(T,"class","svelte-py93mz"),fe(T,"selected",e[0]==="timeKeeper")},m(S,H){c(document.head,t),c(document.head,n),c(document.head,i),c(document.head,r),c(document.head,l),J(S,s,H),J(S,u,H),c(u,o),c(o,f),c(o,w),c(o,p),c(o,E),c(o,k),c(o,C),c(o,T),c(o,q),y[a].m(o,null),m=!0,h||(_=[Z(k,"click",e[2]),Z(T,"click",e[3])],h=!0)},p(S,[H]){(!m||H&1)&&fe(k,"selected",S[0]==="sprint"),(!m||H&1)&&fe(T,"selected",S[0]==="timeKeeper");let M=a;a=I(S),a!==M&&(Ee(),j(y[M],1,1,()=>{y[M]=null}),Se(),v=y[a],v||(v=y[a]=g[a](S),v.c()),A(v,1),v.m(o,null))},i(S){m||(A(v),m=!0)},o(S){j(v),m=!1},d(S){B(t),B(n),B(i),B(r),B(l),S&&B(s),S&&B(u),y[a].d(),h=!1,$(_)}}}function Wt(e,t,n){let i="sprint";function r(u){i!==u&&window.confirm("Switching time cards will lose all data. Are you sure?")&&n(0,i=u)}return[i,r,()=>r("sprint"),()=>r("timeKeeper")]}class Zt extends ne{constructor(t){super(),te(this,t,Wt,Qt,ee,{})}}new Zt({target:document.getElementById("app")});
